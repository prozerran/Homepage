<pre style='color:#000020;background:#f6f8ff;'>
<span style='color:#200080; font-weight:bold; '>using</span> System<span style='color:#406080; '>;</span>
<span style='color:#200080; font-weight:bold; '>using</span> System<span style='color:#308080; '>.</span>Globalization<span style='color:#406080; '>;</span>

<span style='color:#200080; font-weight:bold; '>using</span> Xunit<span style='color:#406080; '>;</span>
<span style='color:#200080; font-weight:bold; '>using</span> Xunit<span style='color:#308080; '>.</span>Abstractions<span style='color:#406080; '>;</span>

<span style='color:#200080; font-weight:bold; '>using</span> CoinbaseEngine<span style='color:#406080; '>;</span>
<span style='color:#200080; font-weight:bold; '>using</span> Newtonsoft<span style='color:#308080; '>.</span>Json<span style='color:#406080; '>;</span>

<span style='color:#200080; font-weight:bold; '>namespace</span> CoinbaseXUnitTest
<span style='color:#406080; '>{</span>
    <span style='color:#200080; font-weight:bold; '>public</span> <span style='color:#200080; font-weight:bold; '>class</span> TestCommon <span style='color:#308080; '>:</span> IDisposable
    <span style='color:#406080; '>{</span>
        <span style='color:#200080; font-weight:bold; '>private</span> <span style='color:#200080; font-weight:bold; '>readonly</span> ITestOutputHelper _testOut<span style='color:#406080; '>;</span>
        <span style='color:#200080; font-weight:bold; '>private</span> <span style='color:#200080; font-weight:bold; '>readonly</span> <span style='color:#200080; font-weight:bold; '>string</span> protocol <span style='color:#308080; '>=</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>2,4,5105,23,1,32,42,2,3,77,15,700,16,17,711,18,22,649,29,712,78,25,23,689,584,624,629,745,87</span><span style='color:#800000; '>"</span><span style='color:#406080; '>;</span>

        <span style='color:#200080; font-weight:bold; '>public</span> TestCommon<span style='color:#308080; '>(</span>ITestOutputHelper testOutputHelper<span style='color:#308080; '>)</span>
        <span style='color:#406080; '>{</span>
            _testOut <span style='color:#308080; '>=</span> testOutputHelper<span style='color:#406080; '>;</span>
        <span style='color:#406080; '>}</span>

        <span style='color:#200080; font-weight:bold; '>public</span> <span style='color:#200080; font-weight:bold; '>void</span> Dispose<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span>
        <span style='color:#406080; '>{</span> <span style='color:#406080; '>}</span>

        <span style='color:#308080; '>[</span>Theory<span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-01-05</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#008c00; '>1578153600</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-05-11</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#008c00; '>1589126400</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-09-04</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#008c00; '>1599148800</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2023-11-05</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#008c00; '>1699113600</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#200080; font-weight:bold; '>public</span> <span style='color:#200080; font-weight:bold; '>void</span> TestToEpochTime<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>string</span> dtStr<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>uint</span> expected<span style='color:#308080; '>)</span>
        <span style='color:#406080; '>{</span>
            <span style='color:#595979; '>// Act</span>
            <span style='color:#200080; font-weight:bold; '>var</span> dt <span style='color:#308080; '>=</span> DateTime<span style='color:#308080; '>.</span>ParseExact<span style='color:#308080; '>(</span>dtStr<span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>yyyy-MM-dd</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> CultureInfo<span style='color:#308080; '>.</span>CurrentCulture<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            <span style='color:#200080; font-weight:bold; '>var</span> actual <span style='color:#308080; '>=</span> dt<span style='color:#308080; '>.</span>ToEpochTime<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// Assert</span>
            Assert<span style='color:#308080; '>.</span>Equal<span style='color:#308080; '>(</span>expected<span style='color:#308080; '>,</span> actual<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
        <span style='color:#406080; '>}</span>

        <span style='color:#308080; '>[</span>Theory<span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-01-05 12:56:41</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-01-05</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-05-11 13:12:33</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-05-11</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-09-04 03:45:21</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-09-04</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2023-11-05 21:14:58</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>2023-11-05</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#200080; font-weight:bold; '>public</span> <span style='color:#200080; font-weight:bold; '>void</span> TestStartDate<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>string</span> dtStr<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>string</span> expected<span style='color:#308080; '>)</span>
        <span style='color:#406080; '>{</span>
            <span style='color:#595979; '>// Act</span>
            <span style='color:#200080; font-weight:bold; '>var</span> dt <span style='color:#308080; '>=</span> DateTime<span style='color:#308080; '>.</span>ParseExact<span style='color:#308080; '>(</span>dtStr<span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>yyyy-MM-dd HH:mm:ss</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> CultureInfo<span style='color:#308080; '>.</span>CurrentCulture<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            <span style='color:#200080; font-weight:bold; '>var</span> actual <span style='color:#308080; '>=</span> CommonUtil<span style='color:#308080; '>.</span>GetStartOfDay<span style='color:#308080; '>(</span>dt<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// Assert</span>
            Assert<span style='color:#308080; '>.</span>Equal<span style='color:#308080; '>(</span>expected<span style='color:#308080; '>,</span> actual<span style='color:#308080; '>.</span>ToString<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>yyyy-MM-dd</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
        <span style='color:#406080; '>}</span>

        <span style='color:#308080; '>[</span>Theory<span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-01-05 12:56:41</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Sunday, January 5, 2020 11:59:59 PM</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-05-11 13:12:33</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Monday, May 11, 2020 11:59:59 PM</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-09-04 03:45:21</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Friday, September 4, 2020 11:59:59 PM</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2023-11-05 21:14:58</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Sunday, November 5, 2023 11:59:59 PM</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#200080; font-weight:bold; '>public</span> <span style='color:#200080; font-weight:bold; '>void</span> TestEndDate<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>string</span> dtStr<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>string</span> expected<span style='color:#308080; '>)</span>
        <span style='color:#406080; '>{</span>
            <span style='color:#595979; '>// Act</span>
            <span style='color:#200080; font-weight:bold; '>var</span> dt <span style='color:#308080; '>=</span> DateTime<span style='color:#308080; '>.</span>ParseExact<span style='color:#308080; '>(</span>dtStr<span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>yyyy-MM-dd HH:mm:ss</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> CultureInfo<span style='color:#308080; '>.</span>CurrentCulture<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            <span style='color:#200080; font-weight:bold; '>var</span> actual <span style='color:#308080; '>=</span> CommonUtil<span style='color:#308080; '>.</span>GetEndOfDay<span style='color:#308080; '>(</span>dt<span style='color:#308080; '>)</span><span style='color:#308080; '>.</span>ToString<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>F</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// Assert</span>
            Assert<span style='color:#308080; '>.</span>Equal<span style='color:#308080; '>(</span>expected<span style='color:#308080; '>,</span> actual<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
        <span style='color:#406080; '>}</span>

        <span style='color:#308080; '>[</span>Theory<span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>123e4567-e89b-12d3-a456-426652340000</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>true</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>187a5c91-abfc-482d-f85a-863542138462</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>true</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>Yo Hommie!</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>false</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>false</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#200080; font-weight:bold; '>public</span> <span style='color:#200080; font-weight:bold; '>void</span> TestIsGuid<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>string</span> guid<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>bool</span> expected<span style='color:#308080; '>)</span>
        <span style='color:#406080; '>{</span>
            <span style='color:#595979; '>// Act</span>
            <span style='color:#200080; font-weight:bold; '>var</span> actual <span style='color:#308080; '>=</span> CommonUtil<span style='color:#308080; '>.</span>IsGuid<span style='color:#308080; '>(</span>guid<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// Assert</span>
            Assert<span style='color:#308080; '>.</span>Equal<span style='color:#308080; '>(</span>expected<span style='color:#308080; '>,</span> actual<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
        <span style='color:#406080; '>}</span>

        <span style='color:#308080; '>[</span>Theory<span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#008000; '>0.125</span><span style='color:#308080; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#308080; '>,</span> <span style='color:#008000; '>0.125</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#008000; '>5.846</span><span style='color:#308080; '>,</span> <span style='color:#008c00; '>5</span><span style='color:#308080; '>,</span> <span style='color:#008000; '>0.846</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#008000; '>10.256</span><span style='color:#308080; '>,</span> <span style='color:#008c00; '>10</span><span style='color:#308080; '>,</span> <span style='color:#008000; '>0.256</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#008000; '>256.14578569</span><span style='color:#308080; '>,</span> <span style='color:#008c00; '>256</span><span style='color:#308080; '>,</span> <span style='color:#008000; '>0.14578569</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#200080; font-weight:bold; '>public</span> <span style='color:#200080; font-weight:bold; '>void</span> TestWholeAndRemainder<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>decimal</span> dec<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>int</span> integral<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>decimal</span> remainder<span style='color:#308080; '>)</span>
        <span style='color:#406080; '>{</span>
            <span style='color:#595979; '>// Act</span>
            <span style='color:#200080; font-weight:bold; '>var</span> actual <span style='color:#308080; '>=</span> CommonUtil<span style='color:#308080; '>.</span>GetWholeAndRemainder<span style='color:#308080; '>(</span>dec<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// Assert</span>
            Assert<span style='color:#308080; '>.</span>Equal<span style='color:#308080; '>(</span>integral<span style='color:#308080; '>,</span> actual<span style='color:#308080; '>.</span>Item1<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span> 
            Assert<span style='color:#308080; '>.</span>Equal<span style='color:#308080; '>(</span>remainder<span style='color:#308080; '>,</span> actual<span style='color:#308080; '>.</span>Item2<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
        <span style='color:#406080; '>}</span>

        <span style='color:#308080; '>[</span>Theory<span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>123e4567-e89b-12d3-a456-426652340000</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>1314564453825188563</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>187a5c91-abfc-482d-f85a-863542138462</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>1763823984794421293</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#200080; font-weight:bold; '>public</span> <span style='color:#200080; font-weight:bold; '>void</span> TestGetExtOrderNoFromGuid<span style='color:#308080; '>(</span>Guid guid<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>string</span> expected<span style='color:#308080; '>)</span>
        <span style='color:#406080; '>{</span>
            <span style='color:#595979; '>// Act</span>
            <span style='color:#200080; font-weight:bold; '>var</span> actual <span style='color:#308080; '>=</span> CommonUtil<span style='color:#308080; '>.</span>GetExtOrderNoFromOrderId<span style='color:#308080; '>(</span>guid<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// Assert</span>
            Assert<span style='color:#308080; '>.</span>Equal<span style='color:#308080; '>(</span>expected<span style='color:#308080; '>,</span> actual<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
        <span style='color:#406080; '>}</span>

        <span style='color:#308080; '>[</span>Fact<span style='color:#308080; '>]</span>
        <span style='color:#200080; font-weight:bold; '>public</span> <span style='color:#200080; font-weight:bold; '>void</span> TestCsvString<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span>
        <span style='color:#406080; '>{</span>
            <span style='color:#595979; '>// Arrange</span>
            <span style='color:#200080; font-weight:bold; '>var</span> csv <span style='color:#308080; '>=</span> <span style='color:#200080; font-weight:bold; '>new</span> CsvMsgTag<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            csv<span style='color:#308080; '>.</span>SetMsgTag<span style='color:#308080; '>(</span>TagMsgId<span style='color:#308080; '>.</span>ProdCode<span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Bitcoin</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            csv<span style='color:#308080; '>.</span>SetMsgTag<span style='color:#308080; '>(</span>TagMsgId<span style='color:#308080; '>.</span>Price<span style='color:#308080; '>,</span> <span style='color:#008c00; '>65847</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            csv<span style='color:#308080; '>.</span>SetMsgTag<span style='color:#308080; '>(</span>TagMsgId<span style='color:#308080; '>.</span>BuySell<span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>B</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            csv<span style='color:#308080; '>.</span>SetMsgTag<span style='color:#308080; '>(</span>TagMsgId<span style='color:#308080; '>.</span>Qty<span style='color:#308080; '>,</span> <span style='color:#008000; '>1.</span>5M<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>true</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// Act</span>
            <span style='color:#200080; font-weight:bold; '>var</span> actual <span style='color:#308080; '>=</span> csv<span style='color:#308080; '>.</span>GetCsvMsgTagString<span style='color:#308080; '>(</span>protocol<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            <span style='color:#200080; font-weight:bold; '>var</span> expected <span style='color:#308080; '>=</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>5105,,,,,,,,,Bitcoin,B,65847,1500000,,,,,,,,,,,,,\r\n</span><span style='color:#800000; '>"</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// Assert</span>
            Assert<span style='color:#308080; '>.</span>Equal<span style='color:#308080; '>(</span>expected<span style='color:#308080; '>,</span> actual<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// output</span>
            _testOut<span style='color:#308080; '>.</span>WriteLine<span style='color:#308080; '>(</span>actual<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
        <span style='color:#406080; '>}</span>

        <span style='color:#308080; '>[</span>Fact<span style='color:#308080; '>]</span>
        <span style='color:#200080; font-weight:bold; '>public</span> <span style='color:#200080; font-weight:bold; '>void</span> TestJsonString<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span>
        <span style='color:#406080; '>{</span>
            <span style='color:#595979; '>// Arrange</span>
            <span style='color:#200080; font-weight:bold; '>var</span> csv <span style='color:#308080; '>=</span> <span style='color:#200080; font-weight:bold; '>new</span> CsvMsgTag<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            csv<span style='color:#308080; '>.</span>SetMsgTag<span style='color:#308080; '>(</span>TagMsgId<span style='color:#308080; '>.</span>ProdCode<span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Bitcoin</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            csv<span style='color:#308080; '>.</span>SetMsgTag<span style='color:#308080; '>(</span>TagMsgId<span style='color:#308080; '>.</span>Price<span style='color:#308080; '>,</span> <span style='color:#008c00; '>65847</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            csv<span style='color:#308080; '>.</span>SetMsgTag<span style='color:#308080; '>(</span>TagMsgId<span style='color:#308080; '>.</span>BuySell<span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>B</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            csv<span style='color:#308080; '>.</span>SetMsgTag<span style='color:#308080; '>(</span>TagMsgId<span style='color:#308080; '>.</span>Qty<span style='color:#308080; '>,</span> <span style='color:#008000; '>1.</span>5M<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>true</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// Act</span>
            <span style='color:#200080; font-weight:bold; '>var</span> actual <span style='color:#308080; '>=</span> csv<span style='color:#308080; '>.</span>ToJsonString<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            <span style='color:#200080; font-weight:bold; '>var</span> actual_indented <span style='color:#308080; '>=</span> csv<span style='color:#308080; '>.</span>ToJsonString<span style='color:#308080; '>(</span>Formatting<span style='color:#308080; '>.</span>Indented<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            <span style='color:#200080; font-weight:bold; '>var</span> expected <span style='color:#308080; '>=</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>{\"$id\":\"1\",\"ProdId\":\"\",\"Multiplier\":0.000001}</span><span style='color:#800000; '>"</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// Assert</span>
            Assert<span style='color:#308080; '>.</span>Equal<span style='color:#308080; '>(</span>expected<span style='color:#308080; '>,</span> actual<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// output</span>
            _testOut<span style='color:#308080; '>.</span>WriteLine<span style='color:#308080; '>(</span>actual_indented<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
        <span style='color:#406080; '>}</span>

        <span style='color:#308080; '>[</span>Fact<span style='color:#308080; '>(</span>Skip <span style='color:#308080; '>=</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>No Test for now</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#200080; font-weight:bold; '>public</span> <span style='color:#200080; font-weight:bold; '>void</span> TestFromJsonToObject<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span>
        <span style='color:#406080; '>{</span>
            <span style='color:#200080; font-weight:bold; '>try</span>
            <span style='color:#406080; '>{</span>
                <span style='color:#595979; '>// Arrange</span>
                SQLite<span style='color:#308080; '>.</span>Instance<span style='color:#308080; '>.</span>Init<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
                PersistantCache<span style='color:#308080; '>.</span>Instance<span style='color:#308080; '>.</span>InsertServerMsg<span style='color:#308080; '>(</span><span style='color:#008c00; '>5105</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>3,4,5105,22,1,2,3,77,15,700,16,17,711,18,22,649,29,712,78,25,23,689,584,624,629,745,87</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

                <span style='color:#200080; font-weight:bold; '>var</span> mp <span style='color:#308080; '>=</span> <span style='color:#200080; font-weight:bold; '>new</span> ModelParser<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
                <span style='color:#200080; font-weight:bold; '>var</span> md <span style='color:#308080; '>=</span> mp<span style='color:#308080; '>.</span>InterpretData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>5105,444,1,AccNo2,450,,,UBTC,B,50270,200000,22,649,29,712,78,0,23,689,584,624,CLIENT-ORDER-ID,745,87</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

                <span style='color:#595979; '>// Act</span>
                <span style='color:#200080; font-weight:bold; '>var</span> json <span style='color:#308080; '>=</span> md<span style='color:#308080; '>.</span>csvMsgTag<span style='color:#308080; '>.</span>GetCsvMsgTagString<span style='color:#308080; '>(</span>protocol<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

                <span style='color:#200080; font-weight:bold; '>var</span> actual <span style='color:#308080; '>=</span> json<span style='color:#308080; '>.</span>FromJsonToObject<span style='color:#308080; '>&lt;</span>CsvMsgTag<span style='color:#308080; '>></span><span style='color:#308080; '>(</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
                <span style='color:#200080; font-weight:bold; '>var</span> expected <span style='color:#308080; '>=</span> md<span style='color:#308080; '>.</span>csvMsgTag<span style='color:#406080; '>;</span>

                <span style='color:#595979; '>// Assert</span>
                Assert<span style='color:#308080; '>.</span>Equal<span style='color:#308080; '>(</span>expected<span style='color:#308080; '>,</span> actual<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            <span style='color:#406080; '>}</span>
            <span style='color:#200080; font-weight:bold; '>finally</span>
            <span style='color:#406080; '>{</span>
                SQLite<span style='color:#308080; '>.</span>Instance<span style='color:#308080; '>.</span>Term<span style='color:#308080; '>(</span><span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
            <span style='color:#406080; '>}</span>            
        <span style='color:#406080; '>}</span>

        <span style='color:#308080; '>[</span>Theory<span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-07-30</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>BUY</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>FILE</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Object</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Secret</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>2bda2085ca081d8ad13e66b7a1eb33863a724777f54c0e428e4887c3806abc54</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-05-02</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Start</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>DB</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>HttpResponse</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>ApiKey</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>05a568935d5f982eaef5364dafec60bca7576be49a18dcf16caa19134bbb8129</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-06-29</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>End</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Memory</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>HTML5</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Passphrase</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>84f5eb0d00ebbc7ace2fb2db944ef7d423a2221d3a2ceb7be8e709bbbf1404ff</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#200080; font-weight:bold; '>public</span> <span style='color:#200080; font-weight:bold; '>void</span> TestGetAccessSign<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>string</span> timestamp<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>string</span> command<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>string</span> path<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>string</span> body<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>string</span> apiSecret<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>string</span> expected<span style='color:#308080; '>)</span>
        <span style='color:#406080; '>{</span>
            <span style='color:#595979; '>// Act</span>
            <span style='color:#200080; font-weight:bold; '>var</span> actual <span style='color:#308080; '>=</span> CommonUtil<span style='color:#308080; '>.</span>GetAccessSign<span style='color:#308080; '>(</span>timestamp<span style='color:#308080; '>,</span> command<span style='color:#308080; '>,</span> path<span style='color:#308080; '>,</span> body<span style='color:#308080; '>,</span> apiSecret<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// Assert</span>
            Assert<span style='color:#308080; '>.</span>Equal<span style='color:#308080; '>(</span>expected<span style='color:#308080; '>,</span> actual<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// output</span>
            _testOut<span style='color:#308080; '>.</span>WriteLine<span style='color:#308080; '>(</span>actual<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
        <span style='color:#406080; '>}</span>

        <span style='color:#308080; '>[</span>Theory<span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-02-02</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>CRC20</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>http://www.google.com/</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Search</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Password</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>8a6476e3d98be33f9a3ca0451f2aa6d0566055611e35aadc0fdae9b53c23426d</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-03-21</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>MD5</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>http://www.microsoft.com/</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>OS</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>SecretPhase</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>30fac615698dfc9a0fdc11728e8a14b0e3cd9c2639bfa11d6d6519c4e04c2c15</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#308080; '>[</span>InlineData<span style='color:#308080; '>(</span><span style='color:#800000; '>"</span><span style='color:#1060b6; '>2020-04-30</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>SHA256</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>http://www.nvidia.com/</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Chips</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>Key</span><span style='color:#800000; '>"</span><span style='color:#308080; '>,</span> <span style='color:#800000; '>"</span><span style='color:#1060b6; '>ea611979147e7eb1d6d097a59d3de584ef823a4a7e44f2dd595c6b599093fcca</span><span style='color:#800000; '>"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>]</span>
        <span style='color:#200080; font-weight:bold; '>public</span> <span style='color:#200080; font-weight:bold; '>void</span> TestGenerateSignature<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>string</span> timestamp<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>string</span> method<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>string</span> url<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>string</span> body<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>string</span> apiSecret<span style='color:#308080; '>,</span> <span style='color:#200080; font-weight:bold; '>string</span> expected<span style='color:#308080; '>)</span>
        <span style='color:#406080; '>{</span>
            <span style='color:#595979; '>// Act</span>
            <span style='color:#200080; font-weight:bold; '>var</span> actual <span style='color:#308080; '>=</span> CommonUtil<span style='color:#308080; '>.</span>GenerateSignature<span style='color:#308080; '>(</span>timestamp<span style='color:#308080; '>,</span> method<span style='color:#308080; '>,</span> url<span style='color:#308080; '>,</span> body<span style='color:#308080; '>,</span> apiSecret<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// Assert</span>
            Assert<span style='color:#308080; '>.</span>Equal<span style='color:#308080; '>(</span>expected<span style='color:#308080; '>,</span> actual<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>

            <span style='color:#595979; '>// output</span>
            _testOut<span style='color:#308080; '>.</span>WriteLine<span style='color:#308080; '>(</span>actual<span style='color:#308080; '>)</span><span style='color:#406080; '>;</span>
        <span style='color:#406080; '>}</span>
    <span style='color:#406080; '>}</span>
<span style='color:#406080; '>}</span>
</pre>
<!--Created using ToHtml.com on 2021-07-30 04:58:10 UTC -->