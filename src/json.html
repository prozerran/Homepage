<pre style='color:#000000;background:#ffffff;'><span style='color:#008000; '>// ==========================================================================</span>
<span style='color:#008000; '>// Author:  Yee Hsu</span>
<span style='color:#008000; '>// Date:    6/8/2011</span>
<span style='color:#008000; '>//</span>
<span style='color:#008000; '>// Desc:    Json Object Parser. A Json parser library that can be used</span>
<span style='color:#008000; '>//          to parse Json Objects and return the objects for storage or</span>
<span style='color:#008000; '>//          usage. </span>
<span style='color:#008000; '>// ==========================================================================</span>

<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#0000e6; '>&lt;</span><span style='color:#40015a; '>stdafx.h</span><span style='color:#0000e6; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#0000e6; '>"</span><span style='color:#40015a; '>JsonObject.h</span><span style='color:#0000e6; '>"</span>

<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#0000e6; '>&lt;</span><span style='color:#40015a; '>json/json_inttypes.h</span><span style='color:#0000e6; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#0000e6; '>&lt;</span><span style='color:#40015a; '>json/json.h</span><span style='color:#0000e6; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#0000e6; '>&lt;</span><span style='color:#40015a; '>exception</span><span style='color:#0000e6; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#0000e6; '>&lt;</span><span style='color:#40015a; '>string.h</span><span style='color:#0000e6; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#0000e6; '>&lt;</span><span style='color:#40015a; '>fstream</span><span style='color:#0000e6; '>></span>

<span style='color:#008000; '>//#include &lt;boost/lexical_cast.hpp></span>
<span style='color:#008000; '>//#include "QLogger.h"</span>

<span style='color:#004a43; '>#</span><span style='color:#004a43; '>if</span><span style='color:#004a43; '> </span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span><span style='color:#004a43; '>_MSC_VER</span><span style='color:#0000ff; '>)</span><span style='color:#004a43; '> </span><span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span><span style='color:#004a43; '> </span><span style='color:#0000ff; '>(</span><span style='color:#004a43; '>_MSC_VER </span><span style='color:#0000ff; '>></span><span style='color:#0000ff; '>=</span><span style='color:#004a43; '> 1300</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>    </span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> strtoll _strtoi64 </span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>    </span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> strtoull _strtoui64</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>endif</span><span style='color:#004a43; '> </span>

<span style='color:#0000ff; font-weight:bold; '>using</span> <span style='color:#0000ff; font-weight:bold; '>namespace</span> std<span style='color:#0000ff; '>;</span>

<span style='color:#0000ff; font-weight:bold; '>namespace</span> __ET__
<span style='color:#0000ff; '>{</span>
    Json<span style='color:#0000ff; '>::</span>Json<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>:</span> m_json<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span><span style='color:#0000ff; '>}</span>

    Json<span style='color:#0000ff; '>::</span>Json<span style='color:#0000ff; '>(</span>Json <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> json<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>:</span> m_json<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>json<span style='color:#0000ff; '>.</span>IsNull<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            m_json <span style='color:#0000ff; '>=</span> json_object_get<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; '>~</span>Json<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            json_object_put<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            m_json <span style='color:#0000ff; '>=</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    Json<span style='color:#0000ff; '>::</span>Json<span style='color:#0000ff; '>(</span>json_object<span style='color:#0000ff; '>*</span> json<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>:</span> m_json<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span><span style='color:#0000ff; '>}</span>

    Json<span style='color:#0000ff; '>::</span>Json<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>:</span> m_json<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>try</span> 
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span>
                m_json <span style='color:#0000ff; '>=</span> json_tokener_parse<span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

            <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>is_error<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#008000; '>//QV_ERROR("Error parse json from string: %s", sz);</span>
                m_json <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>catch</span> <span style='color:#0000ff; '>(</span>std<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>exception</span><span style='color:#0000ff; '>&amp;</span> ex<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#008000; '>//QV_ERROR("Exception caught: %s", ex.what());</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    Json<span style='color:#0000ff; '>::</span>Json<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> str<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>:</span> m_json<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>try</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>str<span style='color:#0000ff; '>.</span>empty<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
                m_json <span style='color:#0000ff; '>=</span> json_tokener_parse<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>c_str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>is_error<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
                <span style='color:#0000ff; '>{</span>
                    <span style='color:#008000; '>//QV_ERROR("Error parse json from string: %s", str.c_str());</span>
                    m_json <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; '>}</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>catch</span> <span style='color:#0000ff; '>(</span>std<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>exception</span><span style='color:#0000ff; '>&amp;</span> ex<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#008000; '>//QV_ERROR("Exception caught: %s", ex.what());</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    Json<span style='color:#0000ff; '>&amp;</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span>Json <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> json<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>m_json <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>*</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span>
            json_object_put<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span>
            m_json <span style='color:#0000ff; '>=</span> json_object_get<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>*</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    Json<span style='color:#0000ff; '>&amp;</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> str<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        Json json<span style='color:#0000ff; '>(</span>json_object_new_string<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>c_str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    Json<span style='color:#0000ff; '>&amp;</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>int</span> i<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        Json json<span style='color:#0000ff; '>(</span>json_object_new_int<span style='color:#0000ff; '>(</span>i<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    Json<span style='color:#0000ff; '>&amp;</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>float</span> f<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        Json json<span style='color:#0000ff; '>(</span>json_object_new_double<span style='color:#0000ff; '>(</span>f<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    Json<span style='color:#0000ff; '>&amp;</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>double</span> d<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        Json json<span style='color:#0000ff; '>(</span>json_object_new_double<span style='color:#0000ff; '>(</span>d<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    Json<span style='color:#0000ff; '>&amp;</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>bool</span> b<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        Json json<span style='color:#0000ff; '>(</span>json_object_new_boolean<span style='color:#0000ff; '>(</span>b<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    json_type Json<span style='color:#0000ff; '>::</span>GetType<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>IsNull<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> json_type_null<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> json_object_get_type<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span>IsNull<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span>m_json <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#808080; font-weight:bold; '>NULL</span> <span style='color:#0000ff; '>|</span><span style='color:#0000ff; '>|</span> m_json <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>json_object<span style='color:#0000ff; '>*</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>-</span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span>IsObject<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>IsNull<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span>json_object_is_type<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>,</span> json_type_object<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span>IsArray<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>IsNull<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span>json_object_is_type<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>,</span> json_type_array<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span>IsString<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>IsNull<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span>json_object_is_type<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>,</span> json_type_string<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span>IsInt<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>IsNull<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span>json_object_is_type<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>,</span> json_type_int<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span>IsDouble<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>IsNull<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span>json_object_is_type<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>,</span> json_type_double<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span>IsBoolean<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>IsNull<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span>json_object_is_type<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>,</span> json_type_boolean<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>String</span> Json<span style='color:#0000ff; '>::</span>ToString<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz <span style='color:#0000ff; '>=</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>IsNull<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> <span style='color:#0000ff; '>(</span>sz <span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>String</span><span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span> 
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>null</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>String</span> Json<span style='color:#0000ff; '>::</span>ToPrettyString<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        std<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>ostringstream</span> out<span style='color:#0000ff; '>;</span>

        ToPrettyStringEx<span style='color:#0000ff; '>(</span>out<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000ff; font-weight:bold; '>endl</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>return</span> out<span style='color:#0000ff; '>.</span>str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>void</span> Json<span style='color:#0000ff; '>::</span>ToPrettyStringEx<span style='color:#0000ff; '>(</span>std<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>ostringstream</span><span style='color:#0000ff; '>&amp;</span> out<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>int</span> level<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>int</span> indent<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>        
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>IsNull<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>null</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>

        <span style='color:#0000ff; font-weight:bold; '>String</span> sInd<span style='color:#0000ff; '>(</span> level <span style='color:#0000ff; '>*</span> indent<span style='color:#0000ff; '>,</span> <span style='color:#000080; '>' '</span> <span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>String</span> sInd1<span style='color:#0000ff; '>(</span> <span style='color:#0000ff; '>(</span>level <span style='color:#0000ff; '>+</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>*</span> indent<span style='color:#0000ff; '>,</span> <span style='color:#000080; '>' '</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>IsObject<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>{</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>

            <span style='color:#008000; '>// for each key</span>
            <span style='color:#0000ff; font-weight:bold; '>int</span> cnt <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
            json_object_object_foreach<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>,</span> _key<span style='color:#0000ff; '>,</span> _val<span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#008000; '>// output key</span>
                <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>cnt<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>)</span>
                <span style='color:#0000ff; '>{</span>
                    out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>,</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; '>}</span>
                out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>"</span> <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> sInd1 <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>\"</span><span style='color:#0000e6; '>"</span> <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> _key <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>\"</span><span style='color:#0000e6; '>: </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>

                Json child<span style='color:#0000ff; '>(</span>json_object_get<span style='color:#0000ff; '>(</span>_val<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                child<span style='color:#0000ff; '>.</span>ToPrettyStringEx<span style='color:#0000ff; '>(</span>out<span style='color:#0000ff; '>,</span> level<span style='color:#0000ff; '>+</span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>,</span> indent<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
            <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>cnt <span style='color:#0000ff; '>></span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
                out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>"</span> <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> sInd<span style='color:#0000ff; '>;</span>

            out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>}</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>

            <span style='color:#0000ff; font-weight:bold; '>return</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>

        <span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>IsArray<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>int</span> len <span style='color:#0000ff; '>=</span> json_object_array_length<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>[</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>for</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>int</span> i <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span> i <span style='color:#0000ff; '>&lt;</span> len<span style='color:#0000ff; '>;</span> <span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>+</span>i<span style='color:#0000ff; '>)</span> 
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>i<span style='color:#0000ff; '>)</span>
                <span style='color:#0000ff; '>{</span>
                    out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>,</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; '>}</span>
                out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>"</span> <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> sInd1<span style='color:#0000ff; '>;</span>

                Json child<span style='color:#0000ff; '>(</span>
                    json_object_get<span style='color:#0000ff; '>(</span>json_object_array_get_idx<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>,</span> i<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
                    <span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                child<span style='color:#0000ff; '>.</span>ToPrettyStringEx<span style='color:#0000ff; '>(</span>out<span style='color:#0000ff; '>,</span> level <span style='color:#0000ff; '>+</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>,</span> indent<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
            <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>len <span style='color:#0000ff; '>></span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
                out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>"</span> <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> sInd<span style='color:#0000ff; '>;</span>
            out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>]</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>

            <span style='color:#0000ff; font-weight:bold; '>return</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span> 
        <span style='color:#0000ff; '>{</span>
            out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> json_object_to_json_string<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span>Json <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> json<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span>m_json <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span>JsonObject <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> obj<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>.</span>GetJson<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span>JsonArray <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> arr<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span>arr<span style='color:#0000ff; '>.</span>GetJson<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> str<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>m_json <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_get_type<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> json_type_string<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz <span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span>str <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>int</span> i<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>m_json <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_get_type<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> json_type_int<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span>i <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> json_object_get_int<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>float</span> f<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>m_json <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_get_type<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> json_type_double<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span>f <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> json_object_get_double<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>double</span> d<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>m_json <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_get_type<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> json_type_double<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span>d <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> json_object_get_double<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>bool</span> val<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>bool</span> bRet <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>switch</span> <span style='color:#0000ff; '>(</span>json_object_get_type<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_boolean</span><span style='color:#e34adc; font-weight:bold; '>:</span>
                bRet <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>val <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>json_object_get_boolean<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> TRUE<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_int</span><span style='color:#e34adc; font-weight:bold; '>:</span>
                bRet <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>val <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span><span style='color:#800000; '>0</span> <span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>=</span> json_object_get_int<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
                <span style='color:#008000; '>// try to convert string type to boolean smartly</span>
            <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_string</span><span style='color:#e34adc; font-weight:bold; '>:</span>
                <span style='color:#0000ff; '>{</span>
                    <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz <span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span>
                        bRet <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>strcmp</span><span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>true</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; '>}</span>
<span style='color:#e34adc; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#0000ff; font-weight:bold; '>default</span><span style='color:#e34adc; '>:</span>
                bRet <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> bRet<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;bool Json::Load(String const&amp; file)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (file.empty() || !boost::filesystem::exists(file)) return false;</span>
<span style='color:#008000; '></span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;json_object* json = json_object_from_file(file.c_str());</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (json == 0 || is_error(json))</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;QV_ERROR("Error load json from: %s", file.c_str());</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return false;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '></span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*this = Json(json);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;}*/</span>
    <span style='color:#0000ff; font-weight:bold; '>bool</span> Json<span style='color:#0000ff; '>::</span>Save<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> file<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>file<span style='color:#0000ff; '>.</span>empty<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>

        std<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>ofstream</span> f<span style='color:#0000ff; '>(</span>file<span style='color:#0000ff; '>.</span>c_str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>f<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            f <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> ToPrettyString<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            f<span style='color:#0000ff; '>.</span>flush<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            f<span style='color:#0000ff; '>.</span>close<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span> 
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#008000; '>//</span>
    <span style='color:#008000; '>// </span>
    JsonArray<span style='color:#0000ff; '>::</span>JsonArray<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>:</span> m_json<span style='color:#0000ff; '>(</span>json_object_new_array<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span><span style='color:#0000ff; '>}</span>
    JsonArray<span style='color:#0000ff; '>::</span>JsonArray<span style='color:#0000ff; '>(</span>JsonArray <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> arr<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>:</span> m_json<span style='color:#0000ff; '>(</span>arr<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span><span style='color:#0000ff; '>}</span>
    JsonArray<span style='color:#0000ff; '>::</span>JsonArray<span style='color:#0000ff; '>(</span>Json <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> json<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>:</span> m_json<span style='color:#0000ff; '>(</span>json_object_new_array<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>.</span>IsArray<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            m_json <span style='color:#0000ff; '>=</span> json<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>
    JsonArray<span style='color:#0000ff; '>::</span>JsonArray<span style='color:#0000ff; '>(</span>std<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>vector</span><span style='color:#0000ff; '>&lt;</span>Json<span style='color:#0000ff; '>></span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> vec<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>:</span> m_json<span style='color:#0000ff; '>(</span>json_object_new_array<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        std<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>vector</span><span style='color:#0000ff; '>&lt;</span>Json<span style='color:#0000ff; '>></span><span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>const_iterator</span> citer<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>for</span> <span style='color:#0000ff; '>(</span>citer <span style='color:#0000ff; '>=</span> vec<span style='color:#0000ff; '>.</span>begin<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> citer <span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>=</span> vec<span style='color:#0000ff; '>.</span>end<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> <span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>+</span>citer<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            Add<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>*</span>citer<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>
    JsonArray<span style='color:#0000ff; '>::</span><span style='color:#0000ff; '>~</span>JsonArray<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span><span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>size_t</span> JsonArray<span style='color:#0000ff; '>::</span>Size<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> json_object_array_length<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    json_type JsonArray<span style='color:#0000ff; '>::</span>GetType<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> item <span style='color:#0000ff; '>=</span>    GetJsonObject<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span>item<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>return</span> json_object_get_type<span style='color:#0000ff; '>(</span>item<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    json_object<span style='color:#0000ff; '>*</span> JsonArray<span style='color:#0000ff; '>::</span>GetJsonObject<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> json_object_array_get_idx<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> idx<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>,</span> int32_t<span style='color:#0000ff; '>&amp;</span> L<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> json <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>json<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>switch</span> <span style='color:#0000ff; '>(</span>json_object_get_type<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_int</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            L <span style='color:#0000ff; '>=</span> json_object_get_int<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
        <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;case json_type_int64:</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;L = (int32_t)json_object_get_int64(json);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;break;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*/</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_string</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz <span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span>
                <span style='color:#0000ff; '>{</span>
                    L <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>strtol</span><span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>,</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>,</span> <span style='color:#800000; '>10</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; '>}</span>
                <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
<span style='color:#e34adc; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#0000ff; font-weight:bold; '>default</span><span style='color:#e34adc; '>:</span>
            <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>,</span> uint32_t<span style='color:#0000ff; '>&amp;</span> L<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> json <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>json<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>switch</span> <span style='color:#0000ff; '>(</span>json_object_get_type<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_int</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                L <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>uint32_t<span style='color:#0000ff; '>)</span>json_object_get_int<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;case json_type_int64:</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;L = (uint32_t)json_object_get_int64(json);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*/</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_string</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz <span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span>
                <span style='color:#0000ff; '>{</span>
                    L <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>strtoul</span><span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>,</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>,</span> <span style='color:#800000; '>10</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; '>}</span>
                <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
<span style='color:#e34adc; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#0000ff; font-weight:bold; '>default</span><span style='color:#e34adc; '>:</span>
            <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>,</span> int64_t<span style='color:#0000ff; '>&amp;</span> val<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        Get<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>(</span>int32_t<span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>)</span> val<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;bool JsonArray::Get(size_t idx, int64_t&amp; val) const</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;json_object* json = GetJsonObject(idx);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (json &amp;&amp; json_object_is_type(json, json_type_int64))</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;val = json_object_get_int64(json);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;else</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return false;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '></span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;bool JsonArray::Get(size_t idx, uint64_t&amp; val) const</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;json_object* json = GetJsonObject(idx);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (json &amp;&amp; json_object_is_type(json, json_type_int64))</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;val = (uint64_t)json_object_get_int64(json);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;else</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return false;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;*/</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>long</span><span style='color:#0000ff; '>&amp;</span> L<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>long</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span>int64_t<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> Get<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>(</span>int64_t<span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>)</span>L<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> Get<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>(</span>int32_t<span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>)</span>L<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>double</span><span style='color:#0000ff; '>&amp;</span> d<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> json <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>json <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_is_type<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>,</span> json_type_double<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            d <span style='color:#0000ff; '>=</span> json_object_get_double<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>bool</span><span style='color:#0000ff; '>&amp;</span> b<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> json <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>json <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_is_type<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>,</span> json_type_boolean<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            b <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>json_object_get_boolean<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> TRUE<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>String</span><span style='color:#0000ff; '>&amp;</span> str<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> json <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>json <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_is_type<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>,</span> json_type_string<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz <span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
                str<span style='color:#0000ff; '>.</span>assign<span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>,</span> Json<span style='color:#0000ff; '>&amp;</span> json<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> tmp <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>tmp<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            json <span style='color:#0000ff; '>=</span> Json<span style='color:#0000ff; '>(</span>Json<span style='color:#0000ff; '>(</span>json_object_get<span style='color:#0000ff; '>(</span>tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>,</span> JsonArray<span style='color:#0000ff; '>&amp;</span> arr<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> json <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>json <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_is_type<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>,</span> json_type_array<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            arr <span style='color:#0000ff; '>=</span> JsonArray<span style='color:#0000ff; '>(</span>Json<span style='color:#0000ff; '>(</span>json_object_get<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>,</span> JsonObject<span style='color:#0000ff; '>&amp;</span> obj<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> json <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>json <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_is_type<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>,</span> json_type_object<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            obj <span style='color:#0000ff; '>=</span> JsonObject<span style='color:#0000ff; '>(</span>Json<span style='color:#0000ff; '>(</span>json_object_get<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>ifdef</span><span style='color:#004a43; '> __GNUC__</span>
    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>size_t</span><span style='color:#0000ff; '>&amp;</span> val<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> json <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>json<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>switch</span> <span style='color:#0000ff; '>(</span>json_object_get_type<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_int</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                val <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span><span style='color:#0000ff; '>)</span>json_object_get_int<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_int64</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                val <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span><span style='color:#0000ff; '>)</span>json_object_get_int64<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_string</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz <span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span>
                <span style='color:#0000ff; '>{</span>
                    val <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; font-weight:bold; '>strtoull</span><span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>,</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>,</span> <span style='color:#800000; '>10</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; '>}</span>
                <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
<span style='color:#e34adc; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#0000ff; font-weight:bold; '>default</span><span style='color:#e34adc; '>:</span>
            <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>endif</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Add<span style='color:#0000ff; '>(</span>Json <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> json<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            json_object<span style='color:#0000ff; '>*</span> obj <span style='color:#0000ff; '>=</span> json_object_get<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            json_object_array_add<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Add<span style='color:#0000ff; '>(</span>int32_t val<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> obj <span style='color:#0000ff; '>=</span> json_object_new_int<span style='color:#0000ff; '>(</span>val<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        json_object_array_add<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Add<span style='color:#0000ff; '>(</span>uint32_t val<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        int32_t i <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>int32_t<span style='color:#0000ff; '>)</span>val<span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>i <span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> Add<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span>uint64_t<span style='color:#0000ff; '>)</span>val<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> Add<span style='color:#0000ff; '>(</span>i<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;bool JsonArray::Add(int64_t val)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;json_object* obj = json_object_new_int64(val);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;QV_ASSERT(obj);</span>
<span style='color:#008000; '></span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;json_object_array_add(m_json.m_json, obj);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '></span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;bool JsonArray::Add(uint64_t val)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;int64_t i = (int64_t)val;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (i &lt; 0)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return Add(boost::lexical_cast&lt;String>(val));</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;else</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return Add(i);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;*/</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Add<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>double</span> d<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> obj <span style='color:#0000ff; '>=</span> json_object_new_double<span style='color:#0000ff; '>(</span>d<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        json_object_array_add<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Add<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>bool</span> b<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> obj <span style='color:#0000ff; '>=</span> json_object_new_boolean<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span>boolean<span style='color:#0000ff; '>)</span>b<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        json_object_array_add<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Add<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> str<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> Add<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>c_str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Add<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>int</span> len<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> obj <span style='color:#0000ff; '>=</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>len <span style='color:#0000ff; '>></span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            obj <span style='color:#0000ff; '>=</span> json_object_new_string_len<span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>,</span> len<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            obj <span style='color:#0000ff; '>=</span> json_object_new_string<span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        json_object_array_add<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Add<span style='color:#0000ff; '>(</span>JsonObject <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> obj<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> Add<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>.</span>ToJson<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonArray<span style='color:#0000ff; '>::</span>Add<span style='color:#0000ff; '>(</span>JsonArray <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> arr<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> Add<span style='color:#0000ff; '>(</span>arr<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    Json <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> JsonArray<span style='color:#0000ff; '>::</span>GetJson<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> m_json<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    Json<span style='color:#0000ff; '>&amp;</span> JsonArray<span style='color:#0000ff; '>::</span>GetJson<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> m_json<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    Json JsonArray<span style='color:#0000ff; '>::</span>ToJson<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> m_json<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>String</span> JsonArray<span style='color:#0000ff; '>::</span>ToString<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> m_json<span style='color:#0000ff; '>.</span>ToString<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>String</span> JsonArray<span style='color:#0000ff; '>::</span>ToPrettyString<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>ostringstream</span> out<span style='color:#0000ff; '>;</span>

        m_json<span style='color:#0000ff; '>.</span>ToPrettyStringEx<span style='color:#0000ff; '>(</span>out<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000ff; font-weight:bold; '>endl</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>return</span> out<span style='color:#0000ff; '>.</span>str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    JsonArray<span style='color:#0000ff; '>&amp;</span> JsonArray<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>(</span>JsonArray <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> arr<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        m_json <span style='color:#0000ff; '>=</span> arr<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>*</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    Json JsonArray<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>[</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span> idx<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>m_json<span style='color:#0000ff; '>.</span>IsNull<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> m_json<span style='color:#0000ff; '>.</span>IsArray<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>idx <span style='color:#0000ff; '>></span><span style='color:#0000ff; '>=</span> Size<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>throw</span> <span style='color:#0000ff; font-weight:bold; '>out_of_range</span><span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>JsonArray out of range!</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>

        Json tmp<span style='color:#0000ff; '>;</span>
        Get<span style='color:#0000ff; '>(</span>idx<span style='color:#0000ff; '>,</span> tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>return</span> tmp<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>




    <span style='color:#008000; '>//---------------------------------------------------------------</span>
    <span style='color:#008000; '>// JsonObject</span>
    <span style='color:#008000; '>//---------------------------------------------------------------</span>
    JsonObject<span style='color:#0000ff; '>::</span>JsonObject<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>:</span> m_json<span style='color:#0000ff; '>(</span>json_object_new_object<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span><span style='color:#0000ff; '>}</span>

    JsonObject<span style='color:#0000ff; '>::</span>JsonObject<span style='color:#0000ff; '>(</span>Json <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> json<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>:</span> m_json<span style='color:#0000ff; '>(</span>json_object_new_object<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>.</span>IsObject<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            m_json <span style='color:#0000ff; '>=</span> json<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    JsonObject<span style='color:#0000ff; '>::</span>JsonObject<span style='color:#0000ff; '>(</span>JsonObject <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> obj<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>:</span> m_json<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span><span style='color:#0000ff; '>}</span>

    JsonObject<span style='color:#0000ff; '>::</span><span style='color:#0000ff; '>~</span>JsonObject<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span><span style='color:#0000ff; '>}</span>

    json_object<span style='color:#0000ff; '>*</span> JsonObject<span style='color:#0000ff; '>::</span>GetJsonObject<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> json_object_object_get<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> key<span style='color:#0000ff; '>.</span>c_str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonObject<span style='color:#0000ff; '>::</span>HasKey<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; '>(</span>GetJsonObject<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>=</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>void</span> JsonObject<span style='color:#0000ff; '>::</span>Remove<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        json_object_object_del<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> key<span style='color:#0000ff; '>.</span>c_str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    json_type JsonObject<span style='color:#0000ff; '>::</span>GetType<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        Json json<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>HasKey<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> Get<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>,</span> json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> json<span style='color:#0000ff; '>.</span>GetType<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> json_type_null<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonObject<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>long</span><span style='color:#0000ff; '>&amp;</span> L<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> Get<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>(</span>int64_t<span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>)</span>L<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonObject<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> int32_t<span style='color:#0000ff; '>&amp;</span> L<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> obj <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>obj<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>switch</span> <span style='color:#0000ff; '>(</span>json_object_get_type<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_int</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                L <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>int32_t<span style='color:#0000ff; '>)</span>json_object_get_int<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;case json_type_int64:</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;L = (int32_t)json_object_get_int64(obj);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*/</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_string</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz <span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span>
                <span style='color:#0000ff; '>{</span>
                    L <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>int32_t<span style='color:#0000ff; '>)</span><span style='color:#0000ff; font-weight:bold; '>strtol</span><span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>,</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>,</span> <span style='color:#800000; '>10</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; '>}</span>
                <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
<span style='color:#e34adc; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#0000ff; font-weight:bold; '>default</span><span style='color:#e34adc; '>:</span>
            <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>    

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonObject<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> uint32_t<span style='color:#0000ff; '>&amp;</span> L<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> obj <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>obj<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>switch</span> <span style='color:#0000ff; '>(</span>json_object_get_type<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_int</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                L <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>uint32_t<span style='color:#0000ff; '>)</span>json_object_get_int<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;case json_type_int64:</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;L = (uint32_t)json_object_get_int64(obj);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*/</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_string</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz <span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span>
                <span style='color:#0000ff; '>{</span>
                    L <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>uint32_t<span style='color:#0000ff; '>)</span><span style='color:#0000ff; font-weight:bold; '>strtoul</span><span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>,</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>,</span> <span style='color:#800000; '>10</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; '>}</span>
                <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
<span style='color:#e34adc; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#0000ff; font-weight:bold; '>default</span><span style='color:#e34adc; '>:</span>
            <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonObject<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> int64_t<span style='color:#0000ff; '>&amp;</span> val<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> obj <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>obj<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>switch</span> <span style='color:#0000ff; '>(</span>json_object_get_type<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_int</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                val <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>int64_t<span style='color:#0000ff; '>)</span>json_object_get_int<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;case json_type_int64:</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;val = json_object_get_int64(obj);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*/</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_string</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz <span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span>
                <span style='color:#0000ff; '>{</span>
                    val <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>int64_t<span style='color:#0000ff; '>)</span><span style='color:#0000ff; font-weight:bold; '>strtoll</span><span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>,</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>,</span> <span style='color:#800000; '>10</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; '>}</span>
                <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
<span style='color:#e34adc; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#0000ff; font-weight:bold; '>default</span><span style='color:#e34adc; '>:</span>
            <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;bool JsonObject::Get(String const&amp; key, uint64_t&amp; val) const</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;json_object* obj = GetJsonObject(key);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (!obj) return false;</span>
<span style='color:#008000; '></span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;switch (json_object_get_type(obj))</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;case json_type_int:</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;val = (uint64_t)json_object_get_int(obj);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;case json_type_int64:</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;val = (uint64_t)json_object_get_int64(obj);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;case json_type_string:</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;const char* sz = json_object_get_string(obj);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (sz)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;val = (int64_t)strtoull(sz, NULL, 10);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;break;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;default:</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;break;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return false;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;*/</span>

<span style='color:#004a43; '>#</span><span style='color:#004a43; '>ifdef</span><span style='color:#004a43; '> __GNUC__</span>
    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonObject<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>size_t</span><span style='color:#0000ff; '>&amp;</span> val<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> obj <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>obj<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>switch</span> <span style='color:#0000ff; '>(</span>json_object_get_type<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_int</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                val <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span><span style='color:#0000ff; '>)</span>json_object_get_int<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_int64</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                val <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span><span style='color:#0000ff; '>)</span>json_object_get_int64<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>json_type_string</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz <span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span>
                <span style='color:#0000ff; '>{</span>
                    val <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>size_t</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; font-weight:bold; '>strtoull</span><span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>,</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>,</span> <span style='color:#800000; '>10</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; '>}</span>
                <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
<span style='color:#e34adc; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#0000ff; font-weight:bold; '>default</span><span style='color:#e34adc; '>:</span>
            <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>endif</span>
    <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;bool JsonObject::Get(String const&amp; key, int&amp; i) const</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;json_object* obj = GetJsonObject(key);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (!obj) return false;</span>
<span style='color:#008000; '></span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;switch (json_object_get_type(obj))</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;case json_type_int:</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;i = json_object_get_int(obj);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;case json_type_string:</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;const char* sz = json_object_get_string(obj);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (sz)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;i = atoi(sz);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;break;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;case json_type_int64:</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;i = (int)json_object_get_int64(obj);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;default:</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;break;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return false;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*/</span>
        <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;json_object* obj = GetJsonObject(key);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (obj &amp;&amp; json_object_is_type(obj, json_type_int))</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;i = json_object_get_int(obj);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return true;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;else</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return false;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;*/</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonObject<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>double</span><span style='color:#0000ff; '>&amp;</span> d<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> obj <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>obj <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_is_type<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>,</span> json_type_double<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            d <span style='color:#0000ff; '>=</span> json_object_get_double<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonObject<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>bool</span><span style='color:#0000ff; '>&amp;</span> b<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> obj <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>obj <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_is_type<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>,</span> json_type_boolean<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            b <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>json_object_get_boolean<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonObject<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>String</span><span style='color:#0000ff; '>&amp;</span> str<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> obj <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>obj <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_is_type<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>,</span> json_type_string<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz <span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
                str<span style='color:#0000ff; '>.</span>assign<span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; '>}</span>

        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonObject<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> Json<span style='color:#0000ff; '>&amp;</span> json<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> obj <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            json <span style='color:#0000ff; '>=</span> Json<span style='color:#0000ff; '>(</span>json_object_get<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>


    Json JsonObject<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>[</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        Json tmp<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>HasKey<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            Set<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        Get<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>,</span> tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> tmp<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    Json JsonObject<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>operator</span><span style='color:#0000ff; '>[</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        Json tmp<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>Get<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>,</span> tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>throw</span> KeyNotFound<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> tmp<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>



    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonObject<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> JsonObject<span style='color:#0000ff; '>&amp;</span> obj<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> tmp <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>tmp <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_is_type<span style='color:#0000ff; '>(</span>tmp<span style='color:#0000ff; '>,</span> json_type_object<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            obj <span style='color:#0000ff; '>=</span> JsonObject<span style='color:#0000ff; '>(</span>Json<span style='color:#0000ff; '>(</span>json_object_get<span style='color:#0000ff; '>(</span>tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonObject<span style='color:#0000ff; '>::</span>Get<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> JsonArray<span style='color:#0000ff; '>&amp;</span> arr<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        json_object<span style='color:#0000ff; '>*</span> tmp <span style='color:#0000ff; '>=</span> GetJsonObject<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>tmp <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> json_object_is_type<span style='color:#0000ff; '>(</span>tmp<span style='color:#0000ff; '>,</span> json_type_array<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            arr <span style='color:#0000ff; '>=</span> JsonArray<span style='color:#0000ff; '>(</span>Json<span style='color:#0000ff; '>(</span>json_object_get<span style='color:#0000ff; '>(</span>tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;void JsonObject::Set(String const&amp; key, int i)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Set(key, (int32_t)i);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;}*/</span>

    <span style='color:#0000ff; font-weight:bold; '>void</span> JsonObject<span style='color:#0000ff; '>::</span>Set<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> int32_t i<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>key<span style='color:#0000ff; '>.</span>empty<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        json_object <span style='color:#0000ff; '>*</span>tmp <span style='color:#0000ff; '>=</span> json_object_new_int<span style='color:#0000ff; '>(</span>i<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span>tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        json_object_object_add<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> key<span style='color:#0000ff; '>.</span>c_str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>void</span> JsonObject<span style='color:#0000ff; '>::</span>Set<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> uint32_t u<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        int32_t i <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>int32_t<span style='color:#0000ff; '>)</span>u<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>i <span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#008000; '>// set as uint64_t</span>
            Set<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>(</span>uint64_t<span style='color:#0000ff; '>)</span>u<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            Set<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>,</span> i<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;void JsonObject::Set(String const&amp; key, int64_t i)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;QV_ASSERT(!key.empty());</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;json_object *tmp = json_object_new_int64(i);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;QV_ASSERT(tmp);</span>
<span style='color:#008000; '></span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;json_object_object_add(m_json.m_json, key.c_str(), tmp);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '></span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;void JsonObject::Set(String const&amp; key, uint64_t u)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;int64_t i = (int64_t)u;</span>
<span style='color:#008000; '></span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (i &lt; 0)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;// set as String</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Set(key, boost::lexical_cast&lt;String>(u));</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;else</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;// set as int64_t</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Set(key, i);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;*/</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>ifdef</span><span style='color:#004a43; '> __GNUC__</span>
    <span style='color:#0000ff; font-weight:bold; '>void</span> JsonObject<span style='color:#0000ff; '>::</span>Set<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>size_t</span> i<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>i <span style='color:#0000ff; '>&lt;</span> INT32_MAX<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            Set<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>(</span>int32_t<span style='color:#0000ff; '>)</span>i<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span> 
        <span style='color:#0000ff; '>{</span>
            Set<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>(</span>int64_t<span style='color:#0000ff; '>)</span>i<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>void</span> JsonObject<span style='color:#0000ff; '>::</span>Set<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>time_t</span> t<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        Set<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>(</span>int64_t<span style='color:#0000ff; '>)</span>t<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>endif</span>
    <span style='color:#0000ff; font-weight:bold; '>void</span> JsonObject<span style='color:#0000ff; '>::</span>Set<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>double</span> d<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>key<span style='color:#0000ff; '>.</span>empty<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        json_object <span style='color:#0000ff; '>*</span>tmp <span style='color:#0000ff; '>=</span> json_object_new_double<span style='color:#0000ff; '>(</span>d<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span>tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        json_object_object_add<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> key<span style='color:#0000ff; '>.</span>c_str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>void</span> JsonObject<span style='color:#0000ff; '>::</span>Set<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>bool</span> b<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>key<span style='color:#0000ff; '>.</span>empty<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        json_object <span style='color:#0000ff; '>*</span>tmp <span style='color:#0000ff; '>=</span> json_object_new_boolean<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span>boolean<span style='color:#0000ff; '>)</span>b<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span>tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        json_object_object_add<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> key<span style='color:#0000ff; '>.</span>c_str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>void</span> JsonObject<span style='color:#0000ff; '>::</span>Set<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>int</span> len<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>key<span style='color:#0000ff; '>.</span>empty<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        json_object <span style='color:#0000ff; '>*</span>tmp <span style='color:#0000ff; '>=</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>len <span style='color:#0000ff; '>></span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            tmp <span style='color:#0000ff; '>=</span> json_object_new_string_len<span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>,</span> len<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
        <span style='color:#0000ff; '>{</span>
            tmp <span style='color:#0000ff; '>=</span> json_object_new_string<span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span>tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        json_object_object_add<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> key<span style='color:#0000ff; '>.</span>c_str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>


    <span style='color:#0000ff; font-weight:bold; '>void</span> JsonObject<span style='color:#0000ff; '>::</span>Set<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> str<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        Set<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>,</span> str<span style='color:#0000ff; '>.</span>c_str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>void</span> JsonObject<span style='color:#0000ff; '>::</span>Set<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> Json <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> json<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span>key<span style='color:#0000ff; '>.</span>empty<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        json_object <span style='color:#0000ff; '>*</span>tmp <span style='color:#0000ff; '>=</span> json_object_get<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        QV_ASSERT<span style='color:#0000ff; '>(</span>tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        json_object_object_add<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> key<span style='color:#0000ff; '>.</span>c_str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>void</span> JsonObject<span style='color:#0000ff; '>::</span>Set<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> JsonObject <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> obj<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        Set<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>,</span> obj<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>void</span> JsonObject<span style='color:#0000ff; '>::</span>Set<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> key<span style='color:#0000ff; '>,</span> JsonArray <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> arr<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        Set<span style='color:#0000ff; '>(</span>key<span style='color:#0000ff; '>,</span> arr<span style='color:#0000ff; '>.</span>ToJson<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    Json <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> JsonObject<span style='color:#0000ff; '>::</span>GetJson<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> m_json<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    Json<span style='color:#0000ff; '>&amp;</span> JsonObject<span style='color:#0000ff; '>::</span>GetJson<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> 
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> m_json<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    Json JsonObject<span style='color:#0000ff; '>::</span>ToJson<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> m_json<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>String</span> JsonObject<span style='color:#0000ff; '>::</span>ToString<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> m_json<span style='color:#0000ff; '>.</span>ToString<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>String</span> JsonObject<span style='color:#0000ff; '>::</span>ToPrettyString<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>ostringstream</span> out<span style='color:#0000ff; '>;</span>

        m_json<span style='color:#0000ff; '>.</span>ToPrettyStringEx<span style='color:#0000ff; '>(</span>out<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        out <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#0000ff; font-weight:bold; '>endl</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>return</span> out<span style='color:#0000ff; '>.</span>str<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;String JsonObject::ToQueryString() const</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;std::ostringstream strm;</span>
<span style='color:#008000; '></span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (m_json.m_json)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;int cnt = 0;</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;json_object_object_foreach(m_json.m_json, _key, _val)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (_key &amp;&amp; _val)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (cnt++)</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;strm &lt;&lt; "&amp;";</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;// </span><span style='color:#ffffff; background:#808000; '>TODO: urlencode val</span><span style='color:#008000; '></span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;strm &lt;&lt; _key</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&lt;&lt; "="</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&lt;&lt; json_object_get_string(_val);</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return strm.str();</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;}</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;*/</span>    
    std<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>map</span><span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; font-weight:bold; '>String</span><span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>String</span><span style='color:#0000ff; '>></span> JsonObject<span style='color:#0000ff; '>::</span>ToMap<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>const</span>
    <span style='color:#0000ff; '>{</span>
        std<span style='color:#0000ff; '>::</span><span style='color:#0000ff; font-weight:bold; '>map</span><span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; font-weight:bold; '>String</span><span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>String</span><span style='color:#0000ff; '>></span> ret<span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            json_object_object_foreach<span style='color:#0000ff; '>(</span>m_json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> _key<span style='color:#0000ff; '>,</span> _val<span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>_key <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> _val<span style='color:#0000ff; '>)</span>
                <span style='color:#0000ff; '>{</span>
                    <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> sz <span style='color:#0000ff; '>=</span> json_object_get_string<span style='color:#0000ff; '>(</span>_val<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>sz<span style='color:#0000ff; '>)</span>
                    <span style='color:#0000ff; '>{</span>
                        ret<span style='color:#0000ff; '>.</span>insert<span style='color:#0000ff; '>(</span>std<span style='color:#0000ff; '>::</span>make_pair<span style='color:#0000ff; '>(</span>_key<span style='color:#0000ff; '>,</span> sz<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; '>}</span>
                <span style='color:#0000ff; '>}</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> ret<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>void</span> JsonObject<span style='color:#0000ff; '>::</span>Merge<span style='color:#0000ff; '>(</span>JsonObject <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> obj<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        Json json<span style='color:#0000ff; '>(</span>obj<span style='color:#0000ff; '>.</span>GetJson<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        json_object_object_foreach<span style='color:#0000ff; '>(</span>json<span style='color:#0000ff; '>.</span>m_json<span style='color:#0000ff; '>,</span> _key<span style='color:#0000ff; '>,</span> _val<span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>_key <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> _val<span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
                Set<span style='color:#0000ff; '>(</span>_key<span style='color:#0000ff; '>,</span> Json<span style='color:#0000ff; '>(</span>json_object_get<span style='color:#0000ff; '>(</span>_val<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>

    <span style='color:#0000ff; font-weight:bold; '>bool</span> JsonObject<span style='color:#0000ff; '>::</span>Copy<span style='color:#0000ff; '>(</span>JsonObject<span style='color:#0000ff; '>&amp;</span> to<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> toKey<span style='color:#0000ff; '>,</span> JsonObject <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> from<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>String</span> <span style='color:#0000ff; font-weight:bold; '>const</span><span style='color:#0000ff; '>&amp;</span> fromKey<span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        Json tmp<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>from<span style='color:#0000ff; '>.</span>Get<span style='color:#0000ff; '>(</span>fromKey<span style='color:#0000ff; '>,</span> tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            to<span style='color:#0000ff; '>.</span>Set<span style='color:#0000ff; '>(</span>toKey<span style='color:#0000ff; '>,</span> tmp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>

        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
<span style='color:#0000ff; '>}</span>
</pre>