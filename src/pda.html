<pre style='color:#000000;background:#ffffff;'><span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#0000e6; '>"</span><span style='color:#40015a; '>StdAfx.h</span><span style='color:#0000e6; '>"</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#0000e6; '>"</span><span style='color:#40015a; '>PdaAPI.h</span><span style='color:#0000e6; '>"</span>

PdaAPI<span style='color:#0000ff; '>::</span>PdaAPI<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>void</span><span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>  
<span style='color:#0000ff; '>}</span>

PdaAPI<span style='color:#0000ff; '>::</span><span style='color:#0000ff; '>~</span>PdaAPI<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>void</span><span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>void</span> PdaAPI<span style='color:#0000ff; '>::</span>api_Set_Incomming_Callback<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>void</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>*</span>CallBackFunctionName<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> CallBackSruct<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>CStringArray</span> <span style='color:#0000ff; '>*</span><span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>void</span> <span style='color:#0000ff; '>*</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>void</span> <span style='color:#0000ff; '>*</span>context<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>CallBackFunctionName<span style='color:#0000ff; '>)</span>
  <span style='color:#0000ff; '>{</span>
    CallBackFunc_Inc_Payload<span style='color:#0000ff; '>=</span>CallBackFunctionName<span style='color:#0000ff; '>;</span>
    inc_payload_func_context<span style='color:#0000ff; '>=</span>context<span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; '>}</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>SendAcknowledgement<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> PFlexTracPacket pftp<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>pftp<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>pcode <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> FT_CODE_REQ<span style='color:#0000ff; '>)</span>
  <span style='color:#0000ff; '>{</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>api_IsConnected<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>  
      pbyte pPacket<span style='color:#0000ff; '>;</span>

      <span style='color:#0000ff; font-weight:bold; '>long</span> psize <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
      <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftSend<span style='color:#0000ff; '>.</span>SetFlexTracProtocolString<span style='color:#0000ff; '>(</span>pftp<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>pdeviceid<span style='color:#0000ff; '>,</span> pftp<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>ptype<span style='color:#0000ff; '>,</span> FT_CODE_ACK<span style='color:#0000ff; '>,</span> pftp<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>prefid<span style='color:#0000ff; '>,</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>,</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
      <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftSend<span style='color:#0000ff; '>.</span>GetContent<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>&amp;</span>pPacket<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>&amp;</span>psize<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

      <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_hSerial<span style='color:#0000ff; '>.</span>WriteData<span style='color:#0000ff; '>(</span>pPacket<span style='color:#0000ff; '>,</span> psize<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
  <span style='color:#0000ff; '>}</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>void</span> PdaAPI<span style='color:#0000ff; '>::</span>ProcessIncommingData<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> PFlexTracPacket pftp<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>CallBackFunc_Inc_Payload<span style='color:#0000ff; '>)</span>
  <span style='color:#0000ff; '>{</span>  
    <span style='color:#0000ff; font-weight:bold; '>static</span> <span style='color:#0000ff; font-weight:bold; '>CStringArray</span> sa<span style='color:#0000ff; '>;</span>
    CallBackSruct cbData<span style='color:#0000ff; '>;</span>
    sa<span style='color:#0000ff; '>.</span>RemoveAll<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

    cbData<span style='color:#0000ff; '>.</span>nType <span style='color:#0000ff; '>=</span> PDA_TYPE_DEBUG<span style='color:#0000ff; '>;</span>
    cbData<span style='color:#0000ff; '>.</span>nCode <span style='color:#0000ff; '>=</span> pftp<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>pcode<span style='color:#0000ff; '>;</span>
    cbData<span style='color:#0000ff; '>.</span>nReferenceId <span style='color:#0000ff; '>=</span> pftp<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>prefid<span style='color:#0000ff; '>;</span>

    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>pftp<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>plength <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
      <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>CallBackFunc_Inc_Payload<span style='color:#0000ff; '>(</span>cbData<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>&amp;</span>sa<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>inc_payload_func_context<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_pdaRecv<span style='color:#0000ff; '>.</span>VerifyContent<span style='color:#0000ff; '>(</span>pftp<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>ppayload<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
      <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_pdaRecv<span style='color:#0000ff; '>.</span>SetPdaProtocolString<span style='color:#0000ff; '>(</span>pftp<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>ppayload<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
      <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_pdaRecv<span style='color:#0000ff; '>.</span>GetPdaContent<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>&amp;</span>sa<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>  
      cbData<span style='color:#0000ff; '>.</span>nType <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_pdaRecv<span style='color:#0000ff; '>.</span>GetPdaContentType<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
      <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>CallBackFunc_Inc_Payload<span style='color:#0000ff; '>(</span>cbData<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>&amp;</span>sa<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>inc_payload_func_context<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
  <span style='color:#0000ff; '>}</span>  
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>void</span> PdaAPI<span style='color:#0000ff; '>::</span>ProcessInTrackerData<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> PFlexTracPacket pftp<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>CallBackFunc_Inc_Payload<span style='color:#0000ff; '>)</span>
  <span style='color:#0000ff; '>{</span>  
    <span style='color:#0000ff; font-weight:bold; '>static</span> <span style='color:#0000ff; font-weight:bold; '>CStringArray</span> sa<span style='color:#0000ff; '>;</span>
    CallBackSruct cbData<span style='color:#0000ff; '>;</span>
    sa<span style='color:#0000ff; '>.</span>RemoveAll<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

    cbData<span style='color:#0000ff; '>.</span>nType <span style='color:#0000ff; '>=</span> PDA_TYPE_DEBUG<span style='color:#0000ff; '>;</span>
    cbData<span style='color:#0000ff; '>.</span>nCode <span style='color:#0000ff; '>=</span> pftp<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>pcode<span style='color:#0000ff; '>;</span>
    cbData<span style='color:#0000ff; '>.</span>nReferenceId <span style='color:#0000ff; '>=</span> pftp<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>prefid<span style='color:#0000ff; '>;</span>

    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>pftp<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>plength <span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
      <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> arr<span style='color:#0000ff; '>[</span><span style='color:#800000; '>2</span><span style='color:#0000ff; '>]</span> <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>{</span><span style='color:#800000; '>0</span><span style='color:#0000ff; '>}</span><span style='color:#0000ff; '>;</span>
      arr<span style='color:#0000ff; '>[</span><span style='color:#800000; '>0</span><span style='color:#0000ff; '>]</span> <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span><span style='color:#0000ff; '>)</span> pftp<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>ppayload<span style='color:#0000ff; '>;</span>
      arr<span style='color:#0000ff; '>[</span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>]</span> <span style='color:#0000ff; '>=</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>;</span>

      <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_pdaRecv<span style='color:#0000ff; '>.</span>SetPdaProtocolString<span style='color:#0000ff; '>(</span>PDA_TYPE_TRACKER_DATA<span style='color:#0000ff; '>,</span> arr<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
      <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_pdaRecv<span style='color:#0000ff; '>.</span>GetPdaContent<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>&amp;</span>sa<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>  
      cbData<span style='color:#0000ff; '>.</span>nType <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_pdaRecv<span style='color:#0000ff; '>.</span>GetPdaContentType<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
      <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>CallBackFunc_Inc_Payload<span style='color:#0000ff; '>(</span>cbData<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>&amp;</span>sa<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>inc_payload_func_context<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
  <span style='color:#0000ff; '>}</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>void</span> PdaAPI<span style='color:#0000ff; '>::</span>OnDataFromPort<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>void</span><span style='color:#0000ff; '>*</span> data<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>DWORD</span> nDataCount<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>void</span><span style='color:#0000ff; '>*</span> context<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>  
  <span style='color:#0000ff; font-weight:bold; '>struct</span> FlexTracPacket ftPacket <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>{</span><span style='color:#800000; '>0</span><span style='color:#0000ff; '>}</span><span style='color:#0000ff; '>;</span>
  PPdaAPI pParent <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>PPdaAPI<span style='color:#0000ff; '>)</span> context<span style='color:#0000ff; '>;</span>

  <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>pParent <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> nDataCount <span style='color:#0000ff; '>></span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
  <span style='color:#0000ff; '>{</span>
    pParent<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftRecv<span style='color:#0000ff; '>.</span>AddFlexTracProtocolString<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span>pbyte<span style='color:#0000ff; '>)</span> data<span style='color:#0000ff; '>,</span> nDataCount<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>pParent<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftRecv<span style='color:#0000ff; '>.</span>VerifyFlextracProtocolString<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
      <span style='color:#0000ff; font-weight:bold; '>memset</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>&amp;</span>ftPacket<span style='color:#0000ff; '>,</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span>ftPacket<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
      ftPacket<span style='color:#0000ff; '>.</span>pdeviceid <span style='color:#0000ff; '>=</span> pParent<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftRecv<span style='color:#0000ff; '>.</span>GetDeviceId<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
      ftPacket<span style='color:#0000ff; '>.</span>ptype <span style='color:#0000ff; '>=</span> pParent<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftRecv<span style='color:#0000ff; '>.</span>GetType<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
      ftPacket<span style='color:#0000ff; '>.</span>pcode <span style='color:#0000ff; '>=</span> pParent<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftRecv<span style='color:#0000ff; '>.</span>GetCode<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
      ftPacket<span style='color:#0000ff; '>.</span>prefid   <span style='color:#0000ff; '>=</span> pParent<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftRecv<span style='color:#0000ff; '>.</span>GetReferenceId<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
      ftPacket<span style='color:#0000ff; '>.</span>plength <span style='color:#0000ff; '>=</span> pParent<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftRecv<span style='color:#0000ff; '>.</span>GetLength<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
      <span style='color:#0000ff; font-weight:bold; '>memcpy</span><span style='color:#0000ff; '>(</span>ftPacket<span style='color:#0000ff; '>.</span>ppayload<span style='color:#0000ff; '>,</span> pParent<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftRecv<span style='color:#0000ff; '>.</span>GetPayload<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> ftPacket<span style='color:#0000ff; '>.</span>plength<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

      <span style='color:#0000ff; font-weight:bold; '>switch</span> <span style='color:#0000ff; '>(</span>ftPacket<span style='color:#0000ff; '>.</span>ptype<span style='color:#0000ff; '>)</span>
      <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>FT_TYPE_UC1_POLL</span><span style='color:#e34adc; font-weight:bold; '>:</span>
          pParent<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>SendNextDataInQueue<span style='color:#0000ff; '>(</span>ftPacket<span style='color:#0000ff; '>.</span>pdeviceid<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
          <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>FT_TYPE_UC6_PDATA</span><span style='color:#e34adc; font-weight:bold; '>:</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>FT_TYPE_UC7_PDATA</span><span style='color:#e34adc; font-weight:bold; '>:</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>FT_TYPE_UC9_CALLCENTER</span><span style='color:#e34adc; font-weight:bold; '>:</span>
          pParent<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>SendAcknowledgement<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>&amp;</span>ftPacket<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
          pParent<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>ProcessIncommingData<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>&amp;</span>ftPacket<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
          <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>FT_TYPE_UC8_TDATA</span><span style='color:#e34adc; font-weight:bold; '>:</span>
          pParent<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>SendAcknowledgement<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>&amp;</span>ftPacket<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
          pParent<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>ProcessInTrackerData<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>&amp;</span>ftPacket<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
          <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>

<span style='color:#e34adc; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#0000ff; font-weight:bold; '>default</span><span style='color:#e34adc; '>:</span>
          <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
      <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>
  <span style='color:#0000ff; '>}</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>api_Connect<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>int</span> nPort<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_hSerial<span style='color:#0000ff; '>.</span>Set_Data_Callback<span style='color:#0000ff; '>(</span>OnDataFromPort<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

  <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_hSerial<span style='color:#0000ff; '>.</span>OpenPort<span style='color:#0000ff; '>(</span>nPort<span style='color:#0000ff; '>,</span> <span style='color:#808080; font-weight:bold; '>CBR_9600</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>

  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>api_IsConnected<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_hSerial<span style='color:#0000ff; '>.</span>IsOpen<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>api_Disconnect<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_hSerial<span style='color:#0000ff; '>.</span>ClosePort<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>dbg_SendPoll<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  pbyte pPacket<span style='color:#0000ff; '>;</span>

  <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>api_IsConnected<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
  <span style='color:#0000ff; '>{</span>    
    <span style='color:#0000ff; font-weight:bold; '>long</span> psize <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftSend<span style='color:#0000ff; '>.</span>SetFlexTracProtocolString<span style='color:#0000ff; '>(</span>PDA_FT_TEST_DEVICE_ID<span style='color:#0000ff; '>,</span> FT_TYPE_UC1_POLL<span style='color:#0000ff; '>,</span> FT_CODE_REQ<span style='color:#0000ff; '>,</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>,</span> psize<span style='color:#0000ff; '>,</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftSend<span style='color:#0000ff; '>.</span>GetContent<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>&amp;</span>pPacket<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>&amp;</span>psize<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_hSerial<span style='color:#0000ff; '>.</span>WriteData<span style='color:#0000ff; '>(</span>pPacket<span style='color:#0000ff; '>,</span> psize<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>></span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
      <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; '>}</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>dbg_SendTrackerData<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> stdata<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  pbyte pPacket<span style='color:#0000ff; '>;</span>

  <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>api_IsConnected<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
  <span style='color:#0000ff; '>{</span>    
    <span style='color:#0000ff; font-weight:bold; '>long</span> psize <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftSend<span style='color:#0000ff; '>.</span>SetFlexTracProtocolString<span style='color:#0000ff; '>(</span>PDA_FT_TEST_DEVICE_ID<span style='color:#0000ff; '>,</span> FT_TYPE_UC8_TDATA<span style='color:#0000ff; '>,</span> FT_CODE_REQ<span style='color:#0000ff; '>,</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>strlen</span><span style='color:#0000ff; '>(</span>stdata<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> pbyte<span style='color:#0000ff; '>)</span> stdata<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftSend<span style='color:#0000ff; '>.</span>GetContent<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>&amp;</span>pPacket<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>&amp;</span>psize<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_hSerial<span style='color:#0000ff; '>.</span>WriteData<span style='color:#0000ff; '>(</span>pPacket<span style='color:#0000ff; '>,</span> psize<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>></span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
      <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; '>}</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>dbg_SendData<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>PTCHAR</span> payload<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>int</span> nDevId <span style='color:#008000; '>/* = 0 */</span><span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  pbyte pPacket<span style='color:#0000ff; '>;</span>

  <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>api_IsConnected<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
  <span style='color:#0000ff; '>{</span>   
    <span style='color:#0000ff; font-weight:bold; '>int</span> ptype <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>long</span> psize <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>lstrlen</span><span style='color:#0000ff; '>(</span>payload<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>*</span> <span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>TCHAR</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    ptype <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span>nDevId <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>?</span> FT_TYPE_UC6_PDATA <span style='color:#0000ff; '>:</span> FT_TYPE_UC7_PDATA<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

    <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_pdaSend<span style='color:#0000ff; '>.</span>SetPdaProtocolString<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span>pbyte<span style='color:#0000ff; '>)</span> payload<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_pdaSend<span style='color:#0000ff; '>.</span>GetPdaContentType<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> PDA_TYPE_CALL_CENTER<span style='color:#0000ff; '>)</span>
      ptype <span style='color:#0000ff; '>=</span> FT_TYPE_UC9_CALLCENTER<span style='color:#0000ff; '>;</span>

    <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftSend<span style='color:#0000ff; '>.</span>SetFlexTracProtocolString<span style='color:#0000ff; '>(</span>nDevId<span style='color:#0000ff; '>,</span> ptype<span style='color:#0000ff; '>,</span> FT_CODE_REQ<span style='color:#0000ff; '>,</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>,</span> psize<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>(</span>pbyte<span style='color:#0000ff; '>)</span> payload<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_ftSend<span style='color:#0000ff; '>.</span>GetContent<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>&amp;</span>pPacket<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>&amp;</span>psize<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_hSerial<span style='color:#0000ff; '>.</span>WriteData<span style='color:#0000ff; '>(</span>pPacket<span style='color:#0000ff; '>,</span> psize<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>></span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
      <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; '>}</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>SendNextDataInQueue<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>int</span> nDevId<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>bool</span> bRet <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>false</span><span style='color:#0000ff; '>;</span>

  <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_qSendArr<span style='color:#0000ff; '>.</span>GetCount<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>></span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span>
  <span style='color:#0000ff; '>{</span>
    <span style='color:#0000ff; font-weight:bold; '>CString</span> str <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_qSendArr<span style='color:#0000ff; '>.</span>GetAt<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    bRet <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>dbg_SendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> nDevId<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_qSendArr<span style='color:#0000ff; '>.</span>RemoveAt<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; '>}</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> bRet<span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>QueueSendData<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>PTCHAR</span> payload<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>  
  <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_qSendArr<span style='color:#0000ff; '>.</span>Add<span style='color:#0000ff; '>(</span>payload<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>true</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>void</span> PdaAPI<span style='color:#0000ff; '>::</span>dbg_GetQueuedData<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>CStringArray</span><span style='color:#0000ff; '>*</span> <span style='color:#0000ff; '>&amp;</span>szArr<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  szArr <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>m_qSendArr<span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_Login<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> driverid<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_LOGIN<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> driverid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>QueueSendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_Logout<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> driverid<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_LOGOUT<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> driverid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>QueueSendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_LoginSuccess<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> drivername<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_LOGIN_SUCC<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> drivername<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>dbg_SendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_LoginFail<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_LOGIN_FAIL<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>dbg_SendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_LoginFailCall<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_LOGIN_FAIL_CALL<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>dbg_SendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_CallCenter<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_CALL_CENTER<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>QueueSendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_HasPassengerWaiting<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> driverid<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> msg<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#008000; '>//CTimeSpan cts = CTime::GetCurrentTime() - CTime(0);</span>
  <span style='color:#008000; '>//cts.GetTotalSeconds()</span>

  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_HAS_PASS_WAITING<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> driverid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> msg<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>QueueSendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_OrderAccept<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> driverid<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> orderid<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_ORDER_ACCEPT<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> driverid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> orderid<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>QueueSendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_OrderDispatch<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> driverid<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> orderid<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_ORDER_DISPATCH<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> driverid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> orderid<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>QueueSendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_OrderComplete<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> driverid<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> orderid<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_ORDER_COMPLETE<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> driverid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> orderid<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>QueueSendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_TrafficNews<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> msg<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_TRAFFIC_NEWS<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> msg<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>dbg_SendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_PassengerWaitLocation<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> msg<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_HPW_LOCATION<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> msg<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>dbg_SendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_MiscellaneousInfo<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> msg<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_MISC_INFO<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> msg<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>dbg_SendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_OrderRequest<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> orderid<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> ordermsg<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_ORDER_REQUEST<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> orderid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> ordermsg<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>dbg_SendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_OrderRequest<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> orderid<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> name<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> loc<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> dest<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> <span style='color:#0000ff; font-weight:bold; '>time</span><span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_ORDER_REQUEST<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> orderid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> name<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> loc<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> dest<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>time</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>dbg_SendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_OrderConfirm<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> driverid<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> orderid<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_ORDER_CONFIRM<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> driverid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> orderid<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>dbg_SendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_OrderCancel<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> driverid<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> orderid<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_ORDER_CANCEL<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> driverid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> orderid<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>dbg_SendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_ReservationDispatch<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> driverid<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> orderid<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_RESV_DISPATCH<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> driverid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> orderid<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>QueueSendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_ReservationComplete<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> driverid<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> orderid<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_RESV_COMPLETE<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> driverid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> orderid<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>QueueSendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_ReservationReceipt<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> driverid<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> orderid<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_RESV_RECEIPT<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> driverid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> orderid<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>QueueSendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>bool</span> PdaAPI<span style='color:#0000ff; '>::</span>pda_ReservationCancel<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> driverid<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>CString</span><span style='color:#0000ff; '>&amp;</span> orderid<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
  <span style='color:#0000ff; font-weight:bold; '>CString</span> str<span style='color:#0000ff; '>=</span><span style='color:#0000e6; '>L"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
  str<span style='color:#0000ff; '>.</span>Format<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>L"</span><span style='color:#007997; '>%d</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> PDA_TYPE_RESV_CANCEL<span style='color:#0000ff; '>,</span> PDA_CONTENT_SEPARATOR<span style='color:#0000ff; '>,</span> driverid<span style='color:#0000ff; '>,</span> PDA_CONTENT_DELIMENTOR<span style='color:#0000ff; '>,</span> orderid<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
  <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#0000ff; font-weight:bold; '>this</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>></span>dbg_SendData<span style='color:#0000ff; '>(</span>str<span style='color:#0000ff; '>.</span>GetBuffer<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>
</pre>