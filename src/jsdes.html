<pre style='color:#000000;background:#f1f0f0;'><span style='color:#004a43; '>&lt;!DOCTYPE html></span>
<span style='color:#a65700; '>&lt;</span><span style='color:#400000; font-weight:bold; '>html</span><span style='color:#a65700; '>></span>
<span style='color:#a65700; '>&lt;</span><span style='color:#400000; font-weight:bold; '>script</span><span style='color:#074726; '> langagure</span><span style='color:#806030; '>=</span><span style='color:#e60000; '>"Javascript"</span><span style='color:#074726; '> </span><span style='color:#074726; '>src</span><span style='color:#806030; '>=</span><span style='color:#e60000; '>"./tripledes.js"</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;/</span><span style='color:#400000; font-weight:bold; '>script</span><span style='color:#a65700; '>></span>
<span style='color:#a65700; '>&lt;</span><span style='color:#400000; font-weight:bold; '>script</span><span style='color:#a65700; '>></span>

  <span style='color:#400000; font-weight:bold; '>function</span> openNewWindow<span style='color:#806030; '>(</span>url<span style='color:#806030; '>,</span> name<span style='color:#806030; '>,</span> width<span style='color:#806030; '>,</span> height<span style='color:#806030; '>,</span> onlyContent<span style='color:#806030; '>,</span> centerOnScreen<span style='color:#806030; '>)</span> <span style='color:#806030; '>{</span>
    <span style='color:#400000; font-weight:bold; '>var</span> titleBarSize <span style='color:#806030; '>=</span> <span style='color:#c00000; '>34</span><span style='color:#806030; '>;</span>
    <span style='color:#400000; font-weight:bold; '>var</span> borderSize <span style='color:#806030; '>=</span> <span style='color:#c00000; '>4</span><span style='color:#806030; '>;</span>
    <span style='color:#400000; font-weight:bold; '>var</span> posX <span style='color:#806030; '>=</span> <span style='color:#c00000; '>0</span><span style='color:#806030; '>;</span>
    <span style='color:#400000; font-weight:bold; '>var</span> posY <span style='color:#806030; '>=</span> <span style='color:#c00000; '>0</span><span style='color:#806030; '>;</span>
    <span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span>centerOnScreen<span style='color:#806030; '>)</span> <span style='color:#806030; '>{</span>
      posX <span style='color:#806030; '>=</span> <span style='color:#400000; font-weight:bold; '>parseInt</span><span style='color:#806030; '>(</span><span style='color:#806030; '>(</span>window<span style='color:#806030; '>.</span>screen<span style='color:#806030; '>.</span>availHeight <span style='color:#806030; '>-</span> height <span style='color:#806030; '>-</span> titleBarSize <span style='color:#806030; '>-</span> borderSize<span style='color:#806030; '>)</span> <span style='color:#806030; '>/</span> <span style='color:#c00000; '>2</span><span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>
      posY <span style='color:#806030; '>=</span> <span style='color:#400000; font-weight:bold; '>parseInt</span><span style='color:#806030; '>(</span><span style='color:#806030; '>(</span>window<span style='color:#806030; '>.</span>screen<span style='color:#806030; '>.</span>availWidth <span style='color:#806030; '>-</span> width <span style='color:#806030; '>-</span> borderSize<span style='color:#806030; '>)</span> <span style='color:#806030; '>/</span> <span style='color:#c00000; '>2</span><span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>
    <span style='color:#806030; '>}</span>
    <span style='color:#400000; font-weight:bold; '>var</span> param <span style='color:#806030; '>=</span> <span style='color:#800000; '>"</span><span style='color:#e60000; '>height=</span><span style='color:#800000; '>"</span> <span style='color:#806030; '>+</span> height <span style='color:#806030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#e60000; '>, width=</span><span style='color:#800000; '>"</span> <span style='color:#806030; '>+</span> width<span style='color:#806030; '>;</span>
    <span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span>onlyContent<span style='color:#806030; '>)</span> <span style='color:#806030; '>{</span>
      param <span style='color:#806030; '>+=</span> <span style='color:#800000; '>"</span><span style='color:#e60000; '>, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no</span><span style='color:#800000; '>"</span><span style='color:#806030; '>;</span>
    <span style='color:#806030; '>}</span>
    param <span style='color:#806030; '>+=</span> <span style='color:#800000; '>"</span><span style='color:#e60000; '>, top=</span><span style='color:#800000; '>"</span> <span style='color:#806030; '>+</span> posX <span style='color:#806030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#e60000; '>, left=</span><span style='color:#800000; '>"</span> <span style='color:#806030; '>+</span> posY<span style='color:#806030; '>;</span>
    window<span style='color:#806030; '>.</span>open<span style='color:#806030; '>(</span>url<span style='color:#806030; '>,</span> name<span style='color:#806030; '>,</span> param<span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>
  <span style='color:#806030; '>}</span>

  <span style='color:#400000; font-weight:bold; '>function</span> openModalWindow<span style='color:#806030; '>(</span>url<span style='color:#806030; '>,</span> name<span style='color:#806030; '>,</span> width<span style='color:#806030; '>,</span> height<span style='color:#806030; '>,</span> onlyContent<span style='color:#806030; '>,</span> centerOnScreen<span style='color:#806030; '>)</span> <span style='color:#806030; '>{</span>
    <span style='color:#400000; font-weight:bold; '>var</span> param <span style='color:#806030; '>=</span> <span style='color:#800000; '>"</span><span style='color:#e60000; '>dialogHeight:</span><span style='color:#800000; '>"</span> <span style='color:#806030; '>+</span> height <span style='color:#806030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#e60000; '>px; dialogWidth:</span><span style='color:#800000; '>"</span> <span style='color:#806030; '>+</span> width <span style='color:#806030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#e60000; '>px</span><span style='color:#800000; '>"</span><span style='color:#806030; '>;</span>  
    <span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span>centerOnScreen<span style='color:#806030; '>)</span> <span style='color:#806030; '>{</span>
      param <span style='color:#806030; '>+=</span> <span style='color:#800000; '>"</span><span style='color:#e60000; '>; center=yes</span><span style='color:#800000; '>"</span><span style='color:#806030; '>;</span>
    <span style='color:#806030; '>}</span>
    <span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span>onlyContent<span style='color:#806030; '>)</span> <span style='color:#806030; '>{</span>
      param <span style='color:#806030; '>+=</span> <span style='color:#800000; '>"</span><span style='color:#e60000; '>; toolbar=no; menubar=no; scroll=no; resizable=no; location=no; status=no</span><span style='color:#800000; '>"</span><span style='color:#806030; '>;</span>
    <span style='color:#806030; '>}</span>
    param <span style='color:#806030; '>+=</span> <span style='color:#800000; '>"</span><span style='color:#e60000; '>;</span><span style='color:#800000; '>"</span><span style='color:#806030; '>;</span>  
    window<span style='color:#806030; '>.</span>showModalDialog<span style='color:#806030; '>(</span>url<span style='color:#806030; '>,</span> name<span style='color:#806030; '>,</span> param<span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>
  <span style='color:#806030; '>}</span>  

  <span style='color:#400000; font-weight:bold; '>function</span> encryptBy3DES<span style='color:#806030; '>(</span>message<span style='color:#806030; '>,</span> key<span style='color:#806030; '>)</span> <span style='color:#806030; '>{</span>
    <span style='color:#400000; font-weight:bold; '>var</span> keyHex <span style='color:#806030; '>=</span> CryptoJS<span style='color:#806030; '>.</span>enc<span style='color:#806030; '>.</span>Utf8<span style='color:#806030; '>.</span><span style='color:#400000; font-weight:bold; '>parse</span><span style='color:#806030; '>(</span>key<span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>
    <span style='color:#400000; font-weight:bold; '>var</span> ivHex <span style='color:#806030; '>=</span> CryptoJS<span style='color:#806030; '>.</span>enc<span style='color:#806030; '>.</span>Hex<span style='color:#806030; '>.</span><span style='color:#400000; font-weight:bold; '>parse</span><span style='color:#806030; '>(</span><span style='color:#800000; '>'</span><span style='color:#e60000; '>0123456789abcdef</span><span style='color:#800000; '>'</span><span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>        
    <span style='color:#400000; font-weight:bold; '>var</span> encrypted <span style='color:#806030; '>=</span> CryptoJS<span style='color:#806030; '>.</span>TripleDES<span style='color:#806030; '>.</span>encrypt<span style='color:#806030; '>(</span>message<span style='color:#806030; '>,</span> keyHex<span style='color:#806030; '>,</span> 
      <span style='color:#806030; '>{</span> iv<span style='color:#806030; '>:</span> ivHex<span style='color:#806030; '>,</span> mode<span style='color:#806030; '>:</span> CryptoJS<span style='color:#806030; '>.</span>mode<span style='color:#806030; '>.</span>CBC<span style='color:#806030; '>,</span> padding<span style='color:#806030; '>:</span> CryptoJS<span style='color:#806030; '>.</span>pad<span style='color:#806030; '>.</span>Pkcs7 <span style='color:#806030; '>}</span><span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>

    <span style='color:#400000; font-weight:bold; '>return</span> encrypted<span style='color:#806030; '>.</span><span style='color:#400000; font-weight:bold; '>toString</span><span style='color:#806030; '>(</span><span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>
  <span style='color:#806030; '>}</span>

  <span style='color:#400000; font-weight:bold; '>function</span> decryptBy3DES<span style='color:#806030; '>(</span>ciphertext<span style='color:#806030; '>,</span> key<span style='color:#806030; '>)</span> <span style='color:#806030; '>{</span>
      <span style='color:#400000; font-weight:bold; '>var</span> keyHex <span style='color:#806030; '>=</span> CryptoJS<span style='color:#806030; '>.</span>enc<span style='color:#806030; '>.</span>Utf8<span style='color:#806030; '>.</span><span style='color:#400000; font-weight:bold; '>parse</span><span style='color:#806030; '>(</span>key<span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>
    <span style='color:#400000; font-weight:bold; '>var</span> ivHex <span style='color:#806030; '>=</span> CryptoJS<span style='color:#806030; '>.</span>enc<span style='color:#806030; '>.</span>Hex<span style='color:#806030; '>.</span><span style='color:#400000; font-weight:bold; '>parse</span><span style='color:#806030; '>(</span><span style='color:#800000; '>'</span><span style='color:#e60000; '>0123456789abcdef</span><span style='color:#800000; '>'</span><span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>       
      <span style='color:#400000; font-weight:bold; '>var</span> decrypted <span style='color:#806030; '>=</span> CryptoJS<span style='color:#806030; '>.</span>TripleDES<span style='color:#806030; '>.</span>decrypt<span style='color:#806030; '>(</span><span style='color:#806030; '>{</span>
          ciphertext<span style='color:#806030; '>:</span> CryptoJS<span style='color:#806030; '>.</span>enc<span style='color:#806030; '>.</span>Base64<span style='color:#806030; '>.</span><span style='color:#400000; font-weight:bold; '>parse</span><span style='color:#806030; '>(</span>ciphertext<span style='color:#806030; '>)</span>
      <span style='color:#806030; '>}</span><span style='color:#806030; '>,</span> keyHex<span style='color:#806030; '>,</span> <span style='color:#806030; '>{</span> iv<span style='color:#806030; '>:</span> ivHex<span style='color:#806030; '>,</span> mode<span style='color:#806030; '>:</span> CryptoJS<span style='color:#806030; '>.</span>mode<span style='color:#806030; '>.</span>CBC<span style='color:#806030; '>,</span> padding<span style='color:#806030; '>:</span> CryptoJS<span style='color:#806030; '>.</span>pad<span style='color:#806030; '>.</span>Pkcs7 <span style='color:#806030; '>}</span><span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>

      <span style='color:#400000; font-weight:bold; '>return</span> decrypted<span style='color:#806030; '>.</span><span style='color:#400000; font-weight:bold; '>toString</span><span style='color:#806030; '>(</span>CryptoJS<span style='color:#806030; '>.</span>enc<span style='color:#806030; '>.</span>Utf8<span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>
  <span style='color:#806030; '>}</span>

  <span style='color:#400000; font-weight:bold; '>function</span> openSDSViewer<span style='color:#806030; '>(</span>useModal<span style='color:#806030; '>)</span> <span style='color:#806030; '>{</span>
    <span style='color:#c34e00; '>// modify Finacle URI parameters </span>
    <span style='color:#400000; font-weight:bold; '>var</span> tellerid <span style='color:#806030; '>=</span> <span style='color:#800000; '>'</span><span style='color:#e60000; '>TellerId</span><span style='color:#800000; '>'</span><span style='color:#806030; '>;</span>
    <span style='color:#400000; font-weight:bold; '>var</span> usergroup <span style='color:#806030; '>=</span> <span style='color:#800000; '>'</span><span style='color:#e60000; '>Normal</span><span style='color:#800000; '>'</span><span style='color:#806030; '>;</span>
    <span style='color:#400000; font-weight:bold; '>var</span> bankcode <span style='color:#806030; '>=</span> <span style='color:#800000; '>'</span><span style='color:#e60000; '>016</span><span style='color:#800000; '>'</span><span style='color:#806030; '>;</span>
    <span style='color:#400000; font-weight:bold; '>var</span> accttype <span style='color:#806030; '>=</span> <span style='color:#800000; '>'</span><span style='color:#e60000; '>S</span><span style='color:#800000; '>'</span><span style='color:#806030; '>;</span>
    <span style='color:#400000; font-weight:bold; '>var</span> acctno <span style='color:#806030; '>=</span> <span style='color:#800000; '>'</span><span style='color:#e60000; '>1234567890</span><span style='color:#800000; '>'</span><span style='color:#806030; '>;</span>    
    <span style='color:#400000; font-weight:bold; '>var</span> ipaddr <span style='color:#806030; '>=</span> <span style='color:#800000; '>'</span><span style='color:#e60000; '>127.0.0.1</span><span style='color:#800000; '>'</span><span style='color:#806030; '>;</span>  
    <span style='color:#400000; font-weight:bold; '>var</span> source <span style='color:#806030; '>=</span> <span style='color:#800000; '>'</span><span style='color:#e60000; '>SOURCE</span><span style='color:#800000; '>'</span><span style='color:#806030; '>;</span>

    <span style='color:#c34e00; '>// static vars</span>
    <span style='color:#400000; font-weight:bold; '>var</span> sdsurl <span style='color:#806030; '>=</span> <span style='color:#800000; '>'</span><span style='color:#e60000; '>http://localhost/web/interface.aspx?data=</span><span style='color:#800000; '>'</span><span style='color:#806030; '>;</span>
    <span style='color:#400000; font-weight:bold; '>var</span> enckey <span style='color:#806030; '>=</span> <span style='color:#800000; '>'</span><span style='color:#e60000; '>abcdefhigjkhal12345</span><span style='color:#800000; '>'</span><span style='color:#806030; '>;</span>    

    <span style='color:#c34e00; '>// construct DES encrypted URL</span>
    <span style='color:#400000; font-weight:bold; '>var</span> sdsuri <span style='color:#806030; '>=</span> <span style='color:#800000; '>'</span><span style='color:#e60000; '>UserID=</span><span style='color:#800000; '>'</span>     <span style='color:#806030; '>+</span> tellerid <span style='color:#806030; '>+</span> 
        <span style='color:#800000; '>'</span><span style='color:#e60000; '>&amp;UserGroup=</span><span style='color:#800000; '>'</span>     <span style='color:#806030; '>+</span> usergroup <span style='color:#806030; '>+</span>        
        <span style='color:#800000; '>'</span><span style='color:#e60000; '>&amp;BankCode=</span><span style='color:#800000; '>'</span>     <span style='color:#806030; '>+</span> bankcode <span style='color:#806030; '>+</span>
        <span style='color:#800000; '>'</span><span style='color:#e60000; '>&amp;AccountType=</span><span style='color:#800000; '>'</span>   <span style='color:#806030; '>+</span> accttype <span style='color:#806030; '>+</span>
        <span style='color:#800000; '>'</span><span style='color:#e60000; '>&amp;AccountNo=</span><span style='color:#800000; '>'</span>     <span style='color:#806030; '>+</span> acctno <span style='color:#806030; '>+</span>    
        <span style='color:#800000; '>'</span><span style='color:#e60000; '>&amp;WorkstationIP=</span><span style='color:#800000; '>'</span>   <span style='color:#806030; '>+</span> ipaddr <span style='color:#806030; '>+</span>      
        <span style='color:#800000; '>'</span><span style='color:#e60000; '>&amp;SysDesc=</span><span style='color:#800000; '>'</span>     <span style='color:#806030; '>+</span> source<span style='color:#806030; '>;</span>

    sdsuri <span style='color:#806030; '>=</span> encryptBy3DES<span style='color:#806030; '>(</span>sdsuri<span style='color:#806030; '>,</span> enckey<span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>    <span style='color:#c34e00; '>// encrypt with 3DES</span>
    sdsuri <span style='color:#806030; '>=</span> <span style='color:#400000; font-weight:bold; '>encodeURIComponent</span><span style='color:#806030; '>(</span>sdsuri<span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>    <span style='color:#c34e00; '>// encode for http</span>
    sdsurl <span style='color:#806030; '>+=</span> sdsuri<span style='color:#806030; '>;</span>              <span style='color:#c34e00; '>// concat string</span>

    <span style='color:#c34e00; '>// open new 1024x768 window</span>
    <span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span>useModal<span style='color:#806030; '>)</span> <span style='color:#806030; '>{</span>
      openModalWindow<span style='color:#806030; '>(</span>sdsurl<span style='color:#806030; '>,</span> <span style='color:#800000; '>'</span><span style='color:#800000; '>'</span><span style='color:#806030; '>,</span> <span style='color:#c00000; '>1015</span><span style='color:#806030; '>,</span> <span style='color:#c00000; '>700</span><span style='color:#806030; '>,</span> <span style='color:#0f4d75; '>true</span><span style='color:#806030; '>,</span> <span style='color:#0f4d75; '>true</span><span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>
    <span style='color:#806030; '>}</span> <span style='color:#400000; font-weight:bold; '>else</span> <span style='color:#806030; '>{</span>
      openNewWindow<span style='color:#806030; '>(</span>sdsurl<span style='color:#806030; '>,</span> <span style='color:#800000; '>'</span><span style='color:#800000; '>'</span><span style='color:#806030; '>,</span> <span style='color:#c00000; '>1015</span><span style='color:#806030; '>,</span> <span style='color:#c00000; '>700</span><span style='color:#806030; '>,</span> <span style='color:#0f4d75; '>true</span><span style='color:#806030; '>,</span> <span style='color:#0f4d75; '>true</span><span style='color:#806030; '>)</span><span style='color:#806030; '>;</span>
    <span style='color:#806030; '>}</span>
  <span style='color:#806030; '>}</span>

<span style='color:#a65700; '>&lt;/</span><span style='color:#400000; font-weight:bold; '>script</span><span style='color:#a65700; '>></span>

<span style='color:#a65700; '>&lt;</span><span style='color:#400000; font-weight:bold; '>body</span><span style='color:#a65700; '>></span>
  <span style='color:#a65700; '>&lt;</span><span style='color:#400000; font-weight:bold; '>h1</span><span style='color:#a65700; '>></span>Finacle System<span style='color:#a65700; '>&lt;/</span><span style='color:#400000; font-weight:bold; '>h1</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;</span><span style='color:#400000; font-weight:bold; '>hr</span><span style='color:#074726; '> </span><span style='color:#a65700; '>/></span>
  <span style='color:#a65700; '>&lt;</span><span style='color:#400000; font-weight:bold; '>button</span><span style='color:#074726; '> </span><span style='color:#074726; '>onclick</span><span style='color:#806030; '>=</span><span style='color:#e60000; '>"openSDSViewer(true);"</span><span style='color:#a65700; '>></span>View Signature - Open SDS Modal Viewer<span style='color:#a65700; '>&lt;/</span><span style='color:#400000; font-weight:bold; '>button</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;</span><span style='color:#400000; font-weight:bold; '>br</span><span style='color:#074726; '> </span><span style='color:#a65700; '>/></span>  
  <span style='color:#a65700; '>&lt;</span><span style='color:#400000; font-weight:bold; '>button</span><span style='color:#074726; '> </span><span style='color:#074726; '>onclick</span><span style='color:#806030; '>=</span><span style='color:#e60000; '>"openSDSViewer(false);"</span><span style='color:#a65700; '>></span>View Signature - Open SDS Window Viewer<span style='color:#a65700; '>&lt;/</span><span style='color:#400000; font-weight:bold; '>button</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;</span><span style='color:#400000; font-weight:bold; '>br</span><span style='color:#074726; '> </span><span style='color:#a65700; '>/></span>
<span style='color:#a65700; '>&lt;/</span><span style='color:#400000; font-weight:bold; '>body</span><span style='color:#a65700; '>></span>
<span style='color:#a65700; '>&lt;/</span><span style='color:#400000; font-weight:bold; '>html</span><span style='color:#a65700; '>></span>
</pre>