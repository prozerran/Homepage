<pre style='color:#000000;background:#ffffff;'><span style='color:#008000; '>// ==========================================================================</span>
<span style='color:#008000; '>// Author:  Yee Hsu</span>
<span style='color:#008000; '>// Date:    8/5/2003</span>
<span style='color:#008000; '>//</span>
<span style='color:#008000; '>// Desc:    Print BOL (Bill of Lading) onto packing slip of all orders</span>
<span style='color:#008000; '>//          given input files.</span>
<span style='color:#008000; '>// ==========================================================================</span>

<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#0000e6; '>&lt;</span><span style='color:#40015a; '>stdio.h</span><span style='color:#0000e6; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#0000e6; '>&lt;</span><span style='color:#40015a; '>stdlib.h</span><span style='color:#0000e6; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#0000e6; '>&lt;</span><span style='color:#40015a; '>string.h</span><span style='color:#0000e6; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#0000e6; '>&lt;</span><span style='color:#40015a; '>time.h</span><span style='color:#0000e6; '>></span>

<span style='color:#0000ff; font-weight:bold; '>FILE</span><span style='color:#0000ff; '>*</span> tryopen<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>FILE</span><span style='color:#0000ff; '>*</span> fp<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> fname<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
    <span style='color:#0000ff; font-weight:bold; '>char</span> buf<span style='color:#0000ff; '>[</span><span style='color:#800000; '>2</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>char</span> filename<span style='color:#0000ff; '>[</span><span style='color:#800000; '>32</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>;</span>

    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>fp <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>sprintf</span><span style='color:#0000ff; '>(</span>filename<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>.txt</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> fname<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span>fp <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>fopen</span><span style='color:#0000ff; '>(</span>filename<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>r</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>fprintf</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>stderr</span><span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>Error openining file: </span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> fname<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>fprintf</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>stderr</span><span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>Hit [Enter] to exit: </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>fread</span><span style='color:#0000ff; '>(</span>buf<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span>buf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>stdin</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>exit</span><span style='color:#0000ff; '>(</span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>return</span> fp<span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>int</span> getbol<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>int</span> pt<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> date<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> fname<span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
    <span style='color:#0000ff; font-weight:bold; '>FILE</span><span style='color:#0000ff; '>*</span> fp<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>char</span> buf<span style='color:#0000ff; '>[</span><span style='color:#800000; '>128</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>static</span> <span style='color:#0000ff; font-weight:bold; '>char</span> datebf<span style='color:#0000ff; '>[</span><span style='color:#800000; '>12</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>int</span> blpt <span style='color:#0000ff; '>=</span> pt<span style='color:#0000ff; '>;</span>

    fp <span style='color:#0000ff; '>=</span> tryopen<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>fopen</span><span style='color:#0000ff; '>(</span>fname<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>r</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> fname<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>while</span> <span style='color:#0000ff; '>(</span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>fgets</span><span style='color:#0000ff; '>(</span>buf<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span>buf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> fp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>feof</span><span style='color:#0000ff; '>(</span>fp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>atoi</span><span style='color:#0000ff; '>(</span>buf<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> pt<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>strlen</span><span style='color:#0000ff; '>(</span>buf<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>91</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> buf<span style='color:#0000ff; '>[</span><span style='color:#800000; '>0</span><span style='color:#0000ff; '>]</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#000080; '>' '</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            blpt <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>atoi</span><span style='color:#0000ff; '>(</span>buf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            buf<span style='color:#0000ff; '>[</span><span style='color:#800000; '>58</span><span style='color:#0000ff; '>]</span> <span style='color:#0000ff; '>=</span> <span style='color:#000080; '>'\0'</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>sprintf</span><span style='color:#0000ff; '>(</span>datebf<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>&amp;</span>buf<span style='color:#0000ff; '>[</span><span style='color:#800000; '>50</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>sprintf</span><span style='color:#0000ff; '>(</span>date<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> datebf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>fclose</span><span style='color:#0000ff; '>(</span>fp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>return</span> blpt<span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>void</span> header<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
    <span style='color:#0000ff; font-weight:bold; '>printf</span><span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>Application for Shipping Department.</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>printf</span><span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>Creates a 'manifest.txt' and 'pickticket.txt' file</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>printf</span><span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>from a bill of lading report and pick ticket reports.</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>printf</span><span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>Version 2.1 Yee Hsu. 2003.</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

<span style='color:#0000ff; font-weight:bold; '>int</span> <span style='color:#0000ff; font-weight:bold; '>main</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>int</span> argc<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>char</span><span style='color:#0000ff; '>*</span> argv<span style='color:#0000ff; '>[</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>)</span>
<span style='color:#0000ff; '>{</span>
    <span style='color:#0000ff; font-weight:bold; '>FILE</span> <span style='color:#0000ff; '>*</span>pt<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>*</span>bl<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>*</span>fp<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>*</span>pk<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>int</span> ptic<span style='color:#0000ff; '>,</span> otic<span style='color:#0000ff; '>,</span> ntic<span style='color:#0000ff; '>,</span> i<span style='color:#0000ff; '>,</span> boln<span style='color:#0000ff; '>,</span> pteof<span style='color:#0000ff; '>,</span> pcn<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>char</span> <span style='color:#0000ff; '>*</span>pstore<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>*</span>po<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>*</span>pdept<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>*</span>pwgt<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>*</span>pctn<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>*</span>pc<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>char</span> store<span style='color:#0000ff; '>[</span><span style='color:#800000; '>16</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>,</span> dept<span style='color:#0000ff; '>[</span><span style='color:#800000; '>8</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>,</span> wgt<span style='color:#0000ff; '>[</span><span style='color:#800000; '>8</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>,</span> ctn<span style='color:#0000ff; '>[</span><span style='color:#800000; '>4</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>char</span> ptname<span style='color:#0000ff; '>[</span><span style='color:#800000; '>32</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>,</span> blname<span style='color:#0000ff; '>[</span><span style='color:#800000; '>32</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>,</span> date<span style='color:#0000ff; '>[</span><span style='color:#800000; '>12</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>char</span> ptbf<span style='color:#0000ff; '>[</span><span style='color:#800000; '>1024</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>,</span> blbf<span style='color:#0000ff; '>[</span><span style='color:#800000; '>1024</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>,</span> buf<span style='color:#0000ff; '>[</span><span style='color:#800000; '>1024</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span> mfname<span style='color:#0000ff; '>[</span><span style='color:#0000ff; '>]</span> <span style='color:#0000ff; '>=</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>manifest.txt</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>const</span> <span style='color:#0000ff; font-weight:bold; '>char</span> pkname<span style='color:#0000ff; '>[</span><span style='color:#0000ff; '>]</span> <span style='color:#0000ff; '>=</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>pickticket.txt</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>;</span>

    header<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>fprintf</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>stdout</span><span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>Enter a period (.) to exit.</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>fprintf</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>stdout</span><span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>Enter BL filename: </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>fscanf</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>stdin</span><span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> blname<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    bl <span style='color:#0000ff; '>=</span> tryopen<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>fopen</span><span style='color:#0000ff; '>(</span>blname<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>r</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> blname<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    fp <span style='color:#0000ff; '>=</span> tryopen<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>fopen</span><span style='color:#0000ff; '>(</span>mfname<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>w</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> mfname<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    pk <span style='color:#0000ff; '>=</span> tryopen<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>fopen</span><span style='color:#0000ff; '>(</span>pkname<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>w</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> pkname<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

    <span style='color:#0000ff; font-weight:bold; '>while</span> <span style='color:#0000ff; '>(</span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span>
    <span style='color:#0000ff; '>{</span>
        pteof <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>fprintf</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>stdout</span><span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>Enter PT filename: </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>fscanf</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>stdin</span><span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> ptname<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>strcmp</span><span style='color:#0000ff; '>(</span>ptname<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>.</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
        pt <span style='color:#0000ff; '>=</span> tryopen<span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>fopen</span><span style='color:#0000ff; '>(</span>ptname<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>r</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> ptname<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>fseek</span><span style='color:#0000ff; '>(</span>pk<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; '>-</span><span style='color:#800000; '>3</span><span style='color:#800000; '>L</span><span style='color:#0000ff; '>,</span> SEEK_END<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>while</span> <span style='color:#0000ff; '>(</span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span>
        <span style='color:#0000ff; '>{</span>
            <span style='color:#0000ff; font-weight:bold; '>for</span> <span style='color:#0000ff; '>(</span>i <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span> i <span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>3</span><span style='color:#0000ff; '>;</span> i<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>fgets</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> pt<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>feof</span><span style='color:#0000ff; '>(</span>pt<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>{</span>pteof <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>;</span> <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span><span style='color:#0000ff; '>}</span>
                <span style='color:#0000ff; font-weight:bold; '>fputs</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>,</span> pk<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
            <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>pteof <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
            ptic <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>atoi</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

            <span style='color:#0000ff; font-weight:bold; '>for</span> <span style='color:#0000ff; '>(</span>i <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span> i <span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>6</span><span style='color:#0000ff; '>;</span> i<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>fgets</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> pt<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>fputs</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>,</span> pk<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
            pstore <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>strtok</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '> </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            pstore <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>strtok</span><span style='color:#0000ff; '>(</span><span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '> </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>sprintf</span><span style='color:#0000ff; '>(</span>store<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> pstore<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

            <span style='color:#0000ff; font-weight:bold; '>fgets</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> pt<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>fputs</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>,</span> pk<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>fgets</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> pt<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>fputs</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>,</span> pk<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            po <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>&amp;</span>ptbf<span style='color:#0000ff; '>[</span><span style='color:#800000; '>68</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>;</span>
            ptbf<span style='color:#0000ff; '>[</span><span style='color:#800000; '>80</span><span style='color:#0000ff; '>]</span> <span style='color:#0000ff; '>=</span> <span style='color:#000080; '>'\0'</span><span style='color:#0000ff; '>;</span>
            pdept <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>strtok</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>&amp;</span>ptbf<span style='color:#0000ff; '>[</span><span style='color:#800000; '>81</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '> </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>sprintf</span><span style='color:#0000ff; '>(</span>dept<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> pdept<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

            <span style='color:#0000ff; font-weight:bold; '>fseek</span><span style='color:#0000ff; '>(</span>bl<span style='color:#0000ff; '>,</span> <span style='color:#800000; '>0</span><span style='color:#800000; '>L</span><span style='color:#0000ff; '>,</span> SEEK_SET<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>while</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span><span style='color:#0000ff; font-weight:bold; '>feof</span><span style='color:#0000ff; '>(</span>bl<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>fgets</span><span style='color:#0000ff; '>(</span>blbf<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> bl<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                ntic <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>atoi</span><span style='color:#0000ff; '>(</span>blbf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>

                <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>ntic <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> ptic <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> ntic <span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>=</span> otic<span style='color:#0000ff; '>)</span>
                <span style='color:#0000ff; '>{</span>
                    boln <span style='color:#0000ff; '>=</span> getbol<span style='color:#0000ff; '>(</span>ntic<span style='color:#0000ff; '>,</span> date<span style='color:#0000ff; '>,</span> blname<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    otic <span style='color:#0000ff; '>=</span> ntic<span style='color:#0000ff; '>;</span>
                    pwgt <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>strtok</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>&amp;</span>blbf<span style='color:#0000ff; '>[</span><span style='color:#800000; '>28</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '> </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>sprintf</span><span style='color:#0000ff; '>(</span>wgt<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> pwgt<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    pctn <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>strtok</span><span style='color:#0000ff; '>(</span><span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '> </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    pctn <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>strtok</span><span style='color:#0000ff; '>(</span><span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '> </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>sprintf</span><span style='color:#0000ff; '>(</span>ctn<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> pctn<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>sprintf</span><span style='color:#0000ff; '>(</span>buf<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#007997; '>%d</span><span style='color:#0000e6; '>    </span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>    </span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>    </span><span style='color:#007997; '>%d</span><span style='color:#0000e6; '>    </span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>    </span><span style='color:#007997; '>%6s</span><span style='color:#0000e6; '>    </span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> boln<span style='color:#0000ff; '>,</span> po<span style='color:#0000ff; '>,</span> dept<span style='color:#0000ff; '>,</span> ntic<span style='color:#0000ff; '>,</span> store<span style='color:#0000ff; '>,</span> wgt<span style='color:#0000ff; '>,</span> ctn<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                    <span style='color:#0000ff; font-weight:bold; '>fprintf</span><span style='color:#0000ff; '>(</span>fp<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#007997; '>%s</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> buf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>    
                    <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; '>}</span>
            <span style='color:#0000ff; '>}</span>
            <span style='color:#0000ff; font-weight:bold; '>for</span> <span style='color:#0000ff; '>(</span>i <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span> i <span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>39</span><span style='color:#0000ff; '>;</span> i<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
                <span style='color:#0000ff; font-weight:bold; '>fgets</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> pt<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>fputs</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>,</span> pk<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
            <span style='color:#0000ff; font-weight:bold; '>fgets</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> pt<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            pc <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>strtok</span><span style='color:#0000ff; '>(</span>ptbf<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '> </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            pc <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>strtok</span><span style='color:#0000ff; '>(</span><span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '> </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>pc <span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>=</span> <span style='color:#808080; font-weight:bold; '>NULL</span><span style='color:#0000ff; '>)</span>
            <span style='color:#0000ff; '>{</span>
                pcn <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; font-weight:bold; '>atoi</span><span style='color:#0000ff; '>(</span>pc<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
                <span style='color:#0000ff; font-weight:bold; '>fprintf</span><span style='color:#0000ff; '>(</span>pk<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>            </span><span style='color:#007997; '>%3d</span><span style='color:#0000e6; '> CTNs </span><span style='color:#007997; '>%6s</span><span style='color:#0000e6; '> lbs.                      </span><span style='color:#007997; '>%3d</span><span style='color:#0000e6; '>               </span><span style='color:#007997; '>%8s</span><span style='color:#0000e6; '>  UNITS: </span><span style='color:#007997; '>%5d</span><span style='color:#0000e6; '>  UNITS: </span><span style='color:#007997; '>%5d</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>atoi</span><span style='color:#0000ff; '>(</span>ctn<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> wgt<span style='color:#0000ff; '>,</span> boln<span style='color:#0000ff; '>,</span> date<span style='color:#0000ff; '>,</span> pcn<span style='color:#0000ff; '>,</span> pcn<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; '>}</span>
            <span style='color:#0000ff; font-weight:bold; '>else</span>
                <span style='color:#0000ff; font-weight:bold; '>fprintf</span><span style='color:#0000ff; '>(</span>pk<span style='color:#0000ff; '>,</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>\n</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span>
        <span style='color:#0000ff; font-weight:bold; '>fclose</span><span style='color:#0000ff; '>(</span>pt<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>fclose</span><span style='color:#0000ff; '>(</span>bl<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>fclose</span><span style='color:#0000ff; '>(</span>fp<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>fclose</span><span style='color:#0000ff; '>(</span>pk<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>return</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>
</pre>